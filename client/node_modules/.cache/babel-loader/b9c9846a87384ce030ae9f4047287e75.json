{"ast":null,"code":"import _regeneratorRuntime from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/mahak/Desktop/Virtual-Stock-Market/client/src/pages/Explore.js\";\nimport React, { Component } from 'react';\nimport { Row, Col, Alert, Spin } from 'antd';\nimport { Share } from '../components';\nimport { BuyShare } from '../components';\nimport { getPortfolio, getCash, getStockQuotes } from '../apis';\n\nvar Explore =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Explore, _Component);\n\n  function Explore() {\n    var _this;\n\n    _classCallCheck(this, Explore);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Explore).call(this));\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var portfolio, cash;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this.setState({\n                pageIsLoading: false\n              });\n\n              _context2.next = 3;\n              return getPortfolio();\n\n            case 3:\n              portfolio = _context2.sent;\n              _context2.next = 6;\n              return getCash();\n\n            case 6:\n              cash = _context2.sent;\n\n              _this.setState({\n                portfolio: portfolio,\n                cash: cash\n              });\n\n              _this.interval = setInterval(\n              /*#__PURE__*/\n              _asyncToGenerator(\n              /*#__PURE__*/\n              _regeneratorRuntime.mark(function _callee() {\n                var keys, quotes, total;\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        keys = Object.keys(portfolio);\n                        _context.next = 3;\n                        return getStockQuotes(keys);\n\n                      case 3:\n                        quotes = _context.sent;\n                        total = _this.state.cash;\n                        console.log(portfolio);\n                        Object.keys(quotes).forEach(function (key) {\n                          console.log(total);\n                          total += quotes[key].latestPrice * portfolio[key];\n                        });\n\n                        _this.setState({\n                          quotes: quotes,\n                          portfolioTotal: total\n                        });\n\n                      case 8:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              })), 2000);\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    _this.state = {\n      portfolio: {},\n      cash: 0,\n      quotes: {},\n      portfolioTotal: 0\n    };\n    return _this;\n  }\n\n  _createClass(Explore, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.interval);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"ui container\",\n        style: {\n          marginTop: '1em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, React.createElement(SearchBar, {\n        handleFormSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"ui grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"ui row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"eleven wide column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, React.createElement(VideoDetail, {\n        video: this.state.selectedVideo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"five wide column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(VideoList, {\n        handleVideoSelect: this.handleVideoSelect,\n        videos: this.state.videos,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return Explore;\n}(Component);\n\nexport default Explore;","map":{"version":3,"sources":["/home/mahak/Desktop/Virtual-Stock-Market/client/src/pages/Explore.js"],"names":["React","Component","Row","Col","Alert","Spin","Share","BuyShare","getPortfolio","getCash","getStockQuotes","Explore","componentDidMount","setState","pageIsLoading","portfolio","cash","interval","setInterval","keys","Object","quotes","total","state","console","log","forEach","key","latestPrice","portfolioTotal","clearInterval","marginTop","handleSubmit","selectedVideo","handleVideoSelect","videos"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Row, Col, Alert, Spin } from 'antd';\nimport { Share } from '../components';\nimport { BuyShare } from '../components';\nimport { getPortfolio, getCash, getStockQuotes } from '../apis';\n\nclass Explore extends Component {\n  constructor() {\n    super();\n    this.state = {\n      portfolio: {},\n      cash: 0,\n      quotes: {},\n      portfolioTotal: 0,\n    };\n  }\n\n  componentDidMount = async () => {\n    this.setState({\n      pageIsLoading: false,\n    });\n    const portfolio = await getPortfolio();\n    const cash = await getCash();\n    this.setState({\n      portfolio: portfolio,\n      cash: cash,\n    });\n    this.interval = setInterval(async () => {\n      const keys = Object.keys(portfolio);\n      const quotes = await getStockQuotes(keys);\n      let total = this.state.cash;\n      console.log(portfolio);\n      Object.keys(quotes).forEach((key) => {\n        console.log(total);\n        total += quotes[key].latestPrice * portfolio[key];\n      });\n      this.setState({\n        quotes: quotes,\n        portfolioTotal: total,\n      });\n    }, 2000);\n  };\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  render() {\n    return (\n      <div className=\"ui container\" style={{ marginTop: '1em' }}>\n        <SearchBar handleFormSubmit={this.handleSubmit} />\n        <div className=\"ui grid\">\n          <div className=\"ui row\">\n            <div className=\"eleven wide column\">\n              <VideoDetail video={this.state.selectedVideo} />\n            </div>\n            <div className=\"five wide column\">\n              <VideoList\n                handleVideoSelect={this.handleVideoSelect}\n                videos={this.state.videos}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Explore;\n"]},"metadata":{},"sourceType":"module"}