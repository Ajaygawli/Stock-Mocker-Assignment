{"ast":null,"code":"import _regeneratorRuntime from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport React, { Component } from 'react';\nimport { Row, Col, Alert, Spin } from 'antd';\nimport { Share } from '../components';\nimport { BuyShare } from '../components';\nimport { getPortfolio, getCash, getStockQuotes } from '../apis';\n\nvar Explore =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Explore, _Component);\n\n  function Explore() {\n    var _this;\n\n    _classCallCheck(this, Explore);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Explore).call(this));\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var portfolio, cash;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this.setState({\n                pageIsLoading: false\n              });\n\n              _context2.next = 3;\n              return getPortfolio();\n\n            case 3:\n              portfolio = _context2.sent;\n              _context2.next = 6;\n              return getCash();\n\n            case 6:\n              cash = _context2.sent;\n\n              _this.setState({\n                portfolio: portfolio,\n                cash: cash\n              });\n\n              _this.interval = setInterval(\n              /*#__PURE__*/\n              _asyncToGenerator(\n              /*#__PURE__*/\n              _regeneratorRuntime.mark(function _callee() {\n                var keys, quotes, total;\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        keys = Object.keys(portfolio);\n                        _context.next = 3;\n                        return getStockQuotes(keys);\n\n                      case 3:\n                        quotes = _context.sent;\n                        total = _this.state.cash;\n                        console.log(portfolio);\n                        Object.keys(quotes).forEach(function (key) {\n                          console.log(total);\n                          total += quotes[key].latestPrice * portfolio[key];\n                        });\n\n                        _this.setState({\n                          quotes: quotes,\n                          portfolioTotal: total\n                        });\n\n                      case 8:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              })), 2000);\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    _this.state = {\n      portfolio: {},\n      cash: 0,\n      quotes: {},\n      portfolioTotal: 0\n    };\n    return _this;\n  }\n\n  _createClass(Explore, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.interval);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      React.createElement(React.Fragment, null);\n    }\n  }]);\n\n  return Explore;\n}(Component);\n\nexport default Explore;","map":{"version":3,"sources":["/home/mahak/Desktop/Virtual-Stock-Market/client/src/pages/Explore.js"],"names":["React","Component","Row","Col","Alert","Spin","Share","BuyShare","getPortfolio","getCash","getStockQuotes","Explore","componentDidMount","setState","pageIsLoading","portfolio","cash","interval","setInterval","keys","Object","quotes","total","state","console","log","forEach","key","latestPrice","portfolioTotal","clearInterval"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,GAAT,EAAcC,GAAd,EAAmBC,KAAnB,EAA0BC,IAA1B,QAAsC,MAAtC;AACA,SAASC,KAAT,QAAsB,eAAtB;AACA,SAASC,QAAT,QAAyB,eAAzB;AACA,SAASC,YAAT,EAAuBC,OAAvB,EAAgCC,cAAhC,QAAsD,SAAtD;;IAEMC,O;;;;;AAEJ,qBAAa;AAAA;;AAAA;;AACX;AADW,UAUbC,iBAVa;AAAA;AAAA;AAAA;AAAA,6BAUO;AAAA;AAAA;AAAA;AAAA;AAAA;AAClB,oBAAKC,QAAL,CAAc;AACZC,gBAAAA,aAAa,EAAE;AADH,eAAd;;AADkB;AAAA,qBAIMN,YAAY,EAJlB;;AAAA;AAIZO,cAAAA,SAJY;AAAA;AAAA,qBAKCN,OAAO,EALR;;AAAA;AAKZO,cAAAA,IALY;;AAMlB,oBAAKH,QAAL,CAAc;AACZE,gBAAAA,SAAS,EAAEA,SADC;AAEZC,gBAAAA,IAAI,EAAEA;AAFM,eAAd;;AAIA,oBAAKC,QAAL,GAAgBC,WAAW;AAAA;AAAA;AAAA;AAAA,uCAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AACrBC,wBAAAA,IADqB,GACdC,MAAM,CAACD,IAAP,CAAYJ,SAAZ,CADc;AAAA;AAAA,+BAENL,cAAc,CAACS,IAAD,CAFR;;AAAA;AAErBE,wBAAAA,MAFqB;AAGvBC,wBAAAA,KAHuB,GAGf,MAAKC,KAAL,CAAWP,IAHI;AAI3BQ,wBAAAA,OAAO,CAACC,GAAR,CAAYV,SAAZ;AACAK,wBAAAA,MAAM,CAACD,IAAP,CAAYE,MAAZ,EAAoBK,OAApB,CAA6B,UAAAC,GAAG,EAAG;AACjCH,0BAAAA,OAAO,CAACC,GAAR,CAAYH,KAAZ;AACAA,0BAAAA,KAAK,IAAID,MAAM,CAACM,GAAD,CAAN,CAAYC,WAAZ,GAA0Bb,SAAS,CAACY,GAAD,CAA5C;AACD,yBAHD;;AAIA,8BAAKd,QAAL,CAAc;AACZQ,0BAAAA,MAAM,EAAGA,MADG;AAEZQ,0BAAAA,cAAc,EAAGP;AAFL,yBAAd;;AAT2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAF,IAc3B,IAd2B,CAA3B;;AAVkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAVP;AAEX,UAAKC,KAAL,GAAa;AACXR,MAAAA,SAAS,EAAE,EADA;AAEXC,MAAAA,IAAI,EAAE,CAFK;AAGXK,MAAAA,MAAM,EAAE,EAHG;AAIXQ,MAAAA,cAAc,EAAE;AAJL,KAAb;AAFW;AAQZ;;;;2CA6BsB;AACrBC,MAAAA,aAAa,CAAC,KAAKb,QAAN,CAAb;AACD;;;6BAEO;AACL,+CAAD;AACD;;;;EA7CmBhB,S;;AAiDtB,eAAeU,OAAf","sourcesContent":["import React, { Component } from 'react'\nimport { Row, Col, Alert, Spin } from 'antd'\nimport { Share } from '../components'\nimport { BuyShare } from '../components'\nimport { getPortfolio, getCash, getStockQuotes } from '../apis'\n\nclass Explore extends Component {\n\n  constructor(){\n    super()\n    this.state = {\n      portfolio: {},\n      cash: 0,\n      quotes: {},\n      portfolioTotal: 0,\n    }\n  }\n\n  componentDidMount = async() => {\n    this.setState({\n      pageIsLoading: false,\n    })\n    const portfolio = await getPortfolio()\n    const cash = await getCash()\n    this.setState({\n      portfolio: portfolio,\n      cash: cash\n    })\n    this.interval = setInterval( async () => {\n      const keys = Object.keys(portfolio)\n      const quotes = await getStockQuotes(keys)\n      let total = this.state.cash\n      console.log(portfolio)\n      Object.keys(quotes).forEach( key =>{\n        console.log(total)\n        total += quotes[key].latestPrice * portfolio[key]\n      })\n      this.setState({\n        quotes : quotes,\n        portfolioTotal : total\n      })\n    },\n    2000);\n  }\n  \n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  render(){\n    (<></>)\n  }\n\n}\n\nexport default Explore"]},"metadata":{},"sourceType":"module"}