{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport classnames from 'classnames';\nimport { polyfill } from 'react-lifecycles-compat';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport CalendarPart from './range-calendar/CalendarPart';\nimport TodayButton from './calendar/TodayButton';\nimport OkButton from './calendar/OkButton';\nimport TimePickerButton from './calendar/TimePickerButton';\nimport { commonMixinWrapper, propType, defaultProp } from './mixin/CommonMixin';\nimport { syncTime, getTodayTime, isAllowedDate } from './util';\nimport { goTime, goStartMonth, goEndMonth, includesTime } from './util/toTime';\nfunction noop() {}\nfunction isEmptyArray(arr) {\n  return Array.isArray(arr) && (arr.length === 0 || arr.every(function (i) {\n    return !i;\n  }));\n}\nfunction isArraysEqual(a, b) {\n  if (a === b) return true;\n  if (a === null || typeof a === 'undefined' || b === null || typeof b === 'undefined') {\n    return false;\n  }\n  if (a.length !== b.length) return false;\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\nfunction getValueFromSelectedValue(selectedValue) {\n  var start = selectedValue[0],\n    end = selectedValue[1];\n  var newEnd = end && end.isSame(start, 'month') ? end.clone().add(1, 'month') : end;\n  return [start, newEnd];\n}\nfunction normalizeAnchor(props, init) {\n  var selectedValue = props.selectedValue || init && props.defaultSelectedValue;\n  var value = props.value || init && props.defaultValue;\n  var normalizedValue = value ? getValueFromSelectedValue(value) : getValueFromSelectedValue(selectedValue);\n  return !isEmptyArray(normalizedValue) ? normalizedValue : init && [moment(), moment().add(1, 'months')];\n}\nfunction generateOptions(length, extraOptionGen) {\n  var arr = extraOptionGen ? extraOptionGen().concat() : [];\n  for (var value = 0; value < length; value++) {\n    if (arr.indexOf(value) === -1) {\n      arr.push(value);\n    }\n  }\n  return arr;\n}\nfunction onInputSelect(direction, value, cause) {\n  if (!value) {\n    return;\n  }\n  var originalValue = this.state.selectedValue;\n  var selectedValue = originalValue.concat();\n  var index = direction === 'left' ? 0 : 1;\n  selectedValue[index] = value;\n  if (selectedValue[0] && this.compare(selectedValue[0], selectedValue[1]) > 0) {\n    selectedValue[1 - index] = this.state.showTimePicker ? selectedValue[index] : undefined;\n  }\n  this.props.onInputSelect(selectedValue);\n  this.fireSelectValueChange(selectedValue, null, cause || {\n    source: 'dateInput'\n  });\n}\nvar RangeCalendar = function (_React$Component) {\n  _inherits(RangeCalendar, _React$Component);\n  function RangeCalendar(props) {\n    _classCallCheck(this, RangeCalendar);\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n    _initialiseProps.call(_this);\n    var selectedValue = props.selectedValue || props.defaultSelectedValue;\n    var value = normalizeAnchor(props, 1);\n    _this.state = {\n      selectedValue: selectedValue,\n      prevSelectedValue: selectedValue,\n      firstSelectedValue: null,\n      hoverValue: props.hoverValue || [],\n      value: value,\n      showTimePicker: false,\n      mode: props.mode || ['date', 'date']\n    };\n    return _this;\n  }\n  RangeCalendar.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, state) {\n    var newState = {};\n    if ('value' in nextProps) {\n      newState.value = normalizeAnchor(nextProps, 0);\n    }\n    if ('hoverValue' in nextProps && !isArraysEqual(state.hoverValue, nextProps.hoverValue)) {\n      newState.hoverValue = nextProps.hoverValue;\n    }\n    if ('selectedValue' in nextProps) {\n      newState.selectedValue = nextProps.selectedValue;\n      newState.prevSelectedValue = nextProps.selectedValue;\n    }\n    if ('mode' in nextProps && !isArraysEqual(state.mode, nextProps.mode)) {\n      newState = {\n        mode: nextProps.mode\n      };\n    }\n    return newState;\n  };\n\n  // get disabled hours for second picker\n\n  RangeCalendar.prototype.render = function render() {\n    var _className, _classnames;\n    var props = this.props,\n      state = this.state;\n    var prefixCls = props.prefixCls,\n      dateInputPlaceholder = props.dateInputPlaceholder,\n      seperator = props.seperator,\n      timePicker = props.timePicker,\n      showOk = props.showOk,\n      locale = props.locale,\n      showClear = props.showClear,\n      showToday = props.showToday,\n      type = props.type,\n      clearIcon = props.clearIcon;\n    var hoverValue = state.hoverValue,\n      selectedValue = state.selectedValue,\n      mode = state.mode,\n      showTimePicker = state.showTimePicker;\n    var className = (_className = {}, _className[props.className] = !!props.className, _className[prefixCls] = 1, _className[prefixCls + '-hidden'] = !props.visible, _className[prefixCls + '-range'] = 1, _className[prefixCls + '-show-time-picker'] = showTimePicker, _className[prefixCls + '-week-number'] = props.showWeekNumber, _className);\n    var classes = classnames(className);\n    var newProps = {\n      selectedValue: state.selectedValue,\n      onSelect: this.onSelect,\n      onDayHover: type === 'start' && selectedValue[1] || type === 'end' && selectedValue[0] || !!hoverValue.length ? this.onDayHover : undefined\n    };\n    var placeholder1 = void 0;\n    var placeholder2 = void 0;\n    if (dateInputPlaceholder) {\n      if (Array.isArray(dateInputPlaceholder)) {\n        placeholder1 = dateInputPlaceholder[0];\n        placeholder2 = dateInputPlaceholder[1];\n      } else {\n        placeholder1 = placeholder2 = dateInputPlaceholder;\n      }\n    }\n    var showOkButton = showOk === true || showOk !== false && !!timePicker;\n    var cls = classnames((_classnames = {}, _classnames[prefixCls + '-footer'] = true, _classnames[prefixCls + '-range-bottom'] = true, _classnames[prefixCls + '-footer-show-ok'] = showOkButton, _classnames));\n    var startValue = this.getStartValue();\n    var endValue = this.getEndValue();\n    var todayTime = getTodayTime(startValue);\n    var thisMonth = todayTime.month();\n    var thisYear = todayTime.year();\n    var isTodayInView = startValue.year() === thisYear && startValue.month() === thisMonth || endValue.year() === thisYear && endValue.month() === thisMonth;\n    var nextMonthOfStart = startValue.clone().add(1, 'months');\n    var isClosestMonths = nextMonthOfStart.year() === endValue.year() && nextMonthOfStart.month() === endValue.month();\n\n    // console.warn('Render:', selectedValue.map(t => t.format('YYYY-MM-DD')).join(', '));\n    // console.log('start:', startValue.format('YYYY-MM-DD'));\n    // console.log('end:', endValue.format('YYYY-MM-DD'));\n\n    var extraFooter = props.renderFooter();\n    return React.createElement('div', {\n      ref: this.saveRoot,\n      className: classes,\n      style: props.style,\n      tabIndex: '0',\n      onKeyDown: this.onKeyDown\n    }, props.renderSidebar(), React.createElement('div', {\n      className: prefixCls + '-panel'\n    }, showClear && selectedValue[0] && selectedValue[1] ? React.createElement('a', {\n      role: 'button',\n      title: locale.clear,\n      onClick: this.clear\n    }, clearIcon || React.createElement('span', {\n      className: prefixCls + '-clear-btn'\n    })) : null, React.createElement('div', {\n      className: prefixCls + '-date-panel',\n      onMouseLeave: type !== 'both' ? this.onDatePanelLeave : undefined,\n      onMouseEnter: type !== 'both' ? this.onDatePanelEnter : undefined\n    }, React.createElement(CalendarPart, _extends({}, props, newProps, {\n      hoverValue: hoverValue,\n      direction: 'left',\n      disabledTime: this.disabledStartTime,\n      disabledMonth: this.disabledStartMonth,\n      format: this.getFormat(),\n      value: startValue,\n      mode: mode[0],\n      placeholder: placeholder1,\n      onInputChange: this.onStartInputChange,\n      onInputSelect: this.onStartInputSelect,\n      onValueChange: this.onStartValueChange,\n      onPanelChange: this.onStartPanelChange,\n      showDateInput: this.props.showDateInput,\n      timePicker: timePicker,\n      showTimePicker: showTimePicker,\n      enablePrev: true,\n      enableNext: !isClosestMonths || this.isMonthYearPanelShow(mode[1]),\n      clearIcon: clearIcon\n    })), React.createElement('span', {\n      className: prefixCls + '-range-middle'\n    }, seperator), React.createElement(CalendarPart, _extends({}, props, newProps, {\n      hoverValue: hoverValue,\n      direction: 'right',\n      format: this.getFormat(),\n      timePickerDisabledTime: this.getEndDisableTime(),\n      placeholder: placeholder2,\n      value: endValue,\n      mode: mode[1],\n      onInputChange: this.onEndInputChange,\n      onInputSelect: this.onEndInputSelect,\n      onValueChange: this.onEndValueChange,\n      onPanelChange: this.onEndPanelChange,\n      showDateInput: this.props.showDateInput,\n      timePicker: timePicker,\n      showTimePicker: showTimePicker,\n      disabledTime: this.disabledEndTime,\n      disabledMonth: this.disabledEndMonth,\n      enablePrev: !isClosestMonths || this.isMonthYearPanelShow(mode[0]),\n      enableNext: true,\n      clearIcon: clearIcon\n    }))), React.createElement('div', {\n      className: cls\n    }, showToday || props.timePicker || showOkButton || extraFooter ? React.createElement('div', {\n      className: prefixCls + '-footer-btn'\n    }, extraFooter, showToday ? React.createElement(TodayButton, _extends({}, props, {\n      disabled: isTodayInView,\n      value: state.value[0],\n      onToday: this.onToday,\n      text: locale.backToToday\n    })) : null, props.timePicker ? React.createElement(TimePickerButton, _extends({}, props, {\n      showTimePicker: showTimePicker,\n      onOpenTimePicker: this.onOpenTimePicker,\n      onCloseTimePicker: this.onCloseTimePicker,\n      timePickerDisabled: !this.hasSelectedValue() || hoverValue.length\n    })) : null, showOkButton ? React.createElement(OkButton, _extends({}, props, {\n      onOk: this.onOk,\n      okDisabled: !this.isAllowedDateAndTime(selectedValue) || !this.hasSelectedValue() || hoverValue.length\n    })) : null) : null)));\n  };\n  return RangeCalendar;\n}(React.Component);\nRangeCalendar.propTypes = _extends({}, propType, {\n  prefixCls: PropTypes.string,\n  dateInputPlaceholder: PropTypes.any,\n  seperator: PropTypes.string,\n  defaultValue: PropTypes.any,\n  value: PropTypes.any,\n  hoverValue: PropTypes.any,\n  mode: PropTypes.arrayOf(PropTypes.oneOf(['date', 'month', 'year', 'decade'])),\n  showDateInput: PropTypes.bool,\n  timePicker: PropTypes.any,\n  showOk: PropTypes.bool,\n  showToday: PropTypes.bool,\n  defaultSelectedValue: PropTypes.array,\n  selectedValue: PropTypes.array,\n  onOk: PropTypes.func,\n  showClear: PropTypes.bool,\n  locale: PropTypes.object,\n  onChange: PropTypes.func,\n  onSelect: PropTypes.func,\n  onValueChange: PropTypes.func,\n  onHoverChange: PropTypes.func,\n  onPanelChange: PropTypes.func,\n  format: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\n  onClear: PropTypes.func,\n  type: PropTypes.any,\n  disabledDate: PropTypes.func,\n  disabledTime: PropTypes.func,\n  clearIcon: PropTypes.node,\n  onKeyDown: PropTypes.func\n});\nRangeCalendar.defaultProps = _extends({}, defaultProp, {\n  type: 'both',\n  seperator: '~',\n  defaultSelectedValue: [],\n  onValueChange: noop,\n  onHoverChange: noop,\n  onPanelChange: noop,\n  disabledTime: noop,\n  onInputSelect: noop,\n  showToday: true,\n  showDateInput: true\n});\nvar _initialiseProps = function _initialiseProps() {\n  var _this2 = this;\n  this.onDatePanelEnter = function () {\n    if (_this2.hasSelectedValue()) {\n      _this2.fireHoverValueChange(_this2.state.selectedValue.concat());\n    }\n  };\n  this.onDatePanelLeave = function () {\n    if (_this2.hasSelectedValue()) {\n      _this2.fireHoverValueChange([]);\n    }\n  };\n  this.onSelect = function (value) {\n    var type = _this2.props.type;\n    var _state = _this2.state,\n      selectedValue = _state.selectedValue,\n      prevSelectedValue = _state.prevSelectedValue,\n      firstSelectedValue = _state.firstSelectedValue;\n    var nextSelectedValue = void 0;\n    if (type === 'both') {\n      if (!firstSelectedValue) {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      } else if (_this2.compare(firstSelectedValue, value) < 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [firstSelectedValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        syncTime(prevSelectedValue[1], firstSelectedValue);\n        nextSelectedValue = [value, firstSelectedValue];\n      }\n    } else if (type === 'start') {\n      syncTime(prevSelectedValue[0], value);\n      var endValue = selectedValue[1];\n      nextSelectedValue = endValue && _this2.compare(endValue, value) > 0 ? [value, endValue] : [value];\n    } else {\n      // type === 'end'\n      var startValue = selectedValue[0];\n      if (startValue && _this2.compare(startValue, value) <= 0) {\n        syncTime(prevSelectedValue[1], value);\n        nextSelectedValue = [startValue, value];\n      } else {\n        syncTime(prevSelectedValue[0], value);\n        nextSelectedValue = [value];\n      }\n    }\n    _this2.fireSelectValueChange(nextSelectedValue);\n  };\n  this.onKeyDown = function (event) {\n    if (event.target.nodeName.toLowerCase() === 'input') {\n      return;\n    }\n    var keyCode = event.keyCode;\n    var ctrlKey = event.ctrlKey || event.metaKey;\n    var _state2 = _this2.state,\n      selectedValue = _state2.selectedValue,\n      hoverValue = _state2.hoverValue,\n      firstSelectedValue = _state2.firstSelectedValue,\n      value = _state2.value;\n    var _props = _this2.props,\n      onKeyDown = _props.onKeyDown,\n      disabledDate = _props.disabledDate;\n\n    // Update last time of the picker\n\n    var updateHoverPoint = function updateHoverPoint(func) {\n      // Change hover to make focus in UI\n      var currentHoverTime = void 0;\n      var nextHoverTime = void 0;\n      var nextHoverValue = void 0;\n      if (!firstSelectedValue) {\n        currentHoverTime = hoverValue[0] || selectedValue[0] || value[0] || moment();\n        nextHoverTime = func(currentHoverTime);\n        nextHoverValue = [nextHoverTime];\n        _this2.fireHoverValueChange(nextHoverValue);\n      } else {\n        if (hoverValue.length === 1) {\n          currentHoverTime = hoverValue[0].clone();\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this2.onDayHover(nextHoverTime);\n        } else {\n          currentHoverTime = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          nextHoverTime = func(currentHoverTime);\n          nextHoverValue = _this2.onDayHover(nextHoverTime);\n        }\n      }\n\n      // Find origin hover time on value index\n      if (nextHoverValue.length >= 2) {\n        var miss = nextHoverValue.some(function (ht) {\n          return !includesTime(value, ht, 'month');\n        });\n        if (miss) {\n          var newValue = nextHoverValue.slice().sort(function (t1, t2) {\n            return t1.valueOf() - t2.valueOf();\n          });\n          if (newValue[0].isSame(newValue[1], 'month')) {\n            newValue[1] = newValue[0].clone().add(1, 'month');\n          }\n          _this2.fireValueChange(newValue);\n        }\n      } else if (nextHoverValue.length === 1) {\n        // If only one value, let's keep the origin panel\n        var oriValueIndex = value.findIndex(function (time) {\n          return time.isSame(currentHoverTime, 'month');\n        });\n        if (oriValueIndex === -1) oriValueIndex = 0;\n        if (value.every(function (time) {\n          return !time.isSame(nextHoverTime, 'month');\n        })) {\n          var _newValue = value.slice();\n          _newValue[oriValueIndex] = nextHoverTime.clone();\n          _this2.fireValueChange(_newValue);\n        }\n      }\n      event.preventDefault();\n      return nextHoverTime;\n    };\n    switch (keyCode) {\n      case KeyCode.DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'weeks');\n        });\n        return;\n      case KeyCode.UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'weeks');\n        });\n        return;\n      case KeyCode.LEFT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, -1, 'days');\n          });\n        }\n        return;\n      case KeyCode.RIGHT:\n        if (ctrlKey) {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'years');\n          });\n        } else {\n          updateHoverPoint(function (time) {\n            return goTime(time, 1, 'days');\n          });\n        }\n        return;\n      case KeyCode.HOME:\n        updateHoverPoint(function (time) {\n          return goStartMonth(time);\n        });\n        return;\n      case KeyCode.END:\n        updateHoverPoint(function (time) {\n          return goEndMonth(time);\n        });\n        return;\n      case KeyCode.PAGE_DOWN:\n        updateHoverPoint(function (time) {\n          return goTime(time, 1, 'month');\n        });\n        return;\n      case KeyCode.PAGE_UP:\n        updateHoverPoint(function (time) {\n          return goTime(time, -1, 'month');\n        });\n        return;\n      case KeyCode.ENTER:\n        {\n          var lastValue = void 0;\n          if (hoverValue.length === 0) {\n            lastValue = updateHoverPoint(function (time) {\n              return time;\n            });\n          } else if (hoverValue.length === 1) {\n            lastValue = hoverValue[0];\n          } else {\n            lastValue = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\n          }\n          if (lastValue && (!disabledDate || !disabledDate(lastValue))) {\n            _this2.onSelect(lastValue);\n          }\n          event.preventDefault();\n          return;\n        }\n      default:\n        if (onKeyDown) {\n          onKeyDown(event);\n        }\n    }\n  };\n  this.onDayHover = function (value) {\n    var hoverValue = [];\n    var _state3 = _this2.state,\n      selectedValue = _state3.selectedValue,\n      firstSelectedValue = _state3.firstSelectedValue;\n    var type = _this2.props.type;\n    if (type === 'start' && selectedValue[1]) {\n      hoverValue = _this2.compare(value, selectedValue[1]) < 0 ? [value, selectedValue[1]] : [value];\n    } else if (type === 'end' && selectedValue[0]) {\n      hoverValue = _this2.compare(value, selectedValue[0]) > 0 ? [selectedValue[0], value] : [];\n    } else {\n      if (!firstSelectedValue) {\n        if (_this2.state.hoverValue.length) {\n          _this2.setState({\n            hoverValue: []\n          });\n        }\n        return hoverValue;\n      }\n      hoverValue = _this2.compare(value, firstSelectedValue) < 0 ? [value, firstSelectedValue] : [firstSelectedValue, value];\n    }\n    _this2.fireHoverValueChange(hoverValue);\n    return hoverValue;\n  };\n  this.onToday = function () {\n    var startValue = getTodayTime(_this2.state.value[0]);\n    var endValue = startValue.clone().add(1, 'months');\n    _this2.setState({\n      value: [startValue, endValue]\n    });\n  };\n  this.onOpenTimePicker = function () {\n    _this2.setState({\n      showTimePicker: true\n    });\n  };\n  this.onCloseTimePicker = function () {\n    _this2.setState({\n      showTimePicker: false\n    });\n  };\n  this.onOk = function () {\n    var selectedValue = _this2.state.selectedValue;\n    if (_this2.isAllowedDateAndTime(selectedValue)) {\n      _this2.props.onOk(_this2.state.selectedValue);\n    }\n  };\n  this.onStartInputChange = function () {\n    for (var _len = arguments.length, oargs = Array(_len), _key = 0; _key < _len; _key++) {\n      oargs[_key] = arguments[_key];\n    }\n    var args = ['left'].concat(oargs);\n    return onInputSelect.apply(_this2, args);\n  };\n  this.onEndInputChange = function () {\n    for (var _len2 = arguments.length, oargs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      oargs[_key2] = arguments[_key2];\n    }\n    var args = ['right'].concat(oargs);\n    return onInputSelect.apply(_this2, args);\n  };\n  this.onStartInputSelect = function (value) {\n    var args = ['left', value, {\n      source: 'dateInputSelect'\n    }];\n    return onInputSelect.apply(_this2, args);\n  };\n  this.onEndInputSelect = function (value) {\n    var args = ['right', value, {\n      source: 'dateInputSelect'\n    }];\n    return onInputSelect.apply(_this2, args);\n  };\n  this.onStartValueChange = function (leftValue) {\n    var value = [].concat(_this2.state.value);\n    value[0] = leftValue;\n    return _this2.fireValueChange(value);\n  };\n  this.onEndValueChange = function (rightValue) {\n    var value = [].concat(_this2.state.value);\n    value[1] = rightValue;\n    return _this2.fireValueChange(value);\n  };\n  this.onStartPanelChange = function (value, mode) {\n    var props = _this2.props,\n      state = _this2.state;\n    var newMode = [mode, state.mode[1]];\n    if (!('mode' in props)) {\n      _this2.setState({\n        mode: newMode\n      });\n    }\n    var newValue = [value || state.value[0], state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  };\n  this.onEndPanelChange = function (value, mode) {\n    var props = _this2.props,\n      state = _this2.state;\n    var newMode = [state.mode[0], mode];\n    if (!('mode' in props)) {\n      _this2.setState({\n        mode: newMode\n      });\n    }\n    var newValue = [state.value[0], value || state.value[1]];\n    props.onPanelChange(newValue, newMode);\n  };\n  this.getStartValue = function () {\n    var value = _this2.state.value[0];\n    var selectedValue = _this2.state.selectedValue;\n    // keep selectedTime when select date\n    if (selectedValue[0] && _this2.props.timePicker) {\n      value = value.clone();\n      syncTime(selectedValue[0], value);\n    }\n    if (_this2.state.showTimePicker && selectedValue[0]) {\n      return selectedValue[0];\n    }\n    return value;\n  };\n  this.getEndValue = function () {\n    var _state4 = _this2.state,\n      value = _state4.value,\n      selectedValue = _state4.selectedValue,\n      showTimePicker = _state4.showTimePicker;\n    var endValue = value[1] ? value[1].clone() : value[0].clone().add(1, 'month');\n    // keep selectedTime when select date\n    if (selectedValue[1] && _this2.props.timePicker) {\n      syncTime(selectedValue[1], endValue);\n    }\n    if (showTimePicker) {\n      return selectedValue[1] ? selectedValue[1] : _this2.getStartValue();\n    }\n    return endValue;\n  };\n  this.getEndDisableTime = function () {\n    var _state5 = _this2.state,\n      selectedValue = _state5.selectedValue,\n      value = _state5.value;\n    var disabledTime = _this2.props.disabledTime;\n    var userSettingDisabledTime = disabledTime(selectedValue, 'end') || {};\n    var startValue = selectedValue && selectedValue[0] || value[0].clone();\n    // if startTime and endTime is same day..\n    // the second time picker will not able to pick time before first time picker\n    if (!selectedValue[1] || startValue.isSame(selectedValue[1], 'day')) {\n      var hours = startValue.hour();\n      var minutes = startValue.minute();\n      var second = startValue.second();\n      var _disabledHours = userSettingDisabledTime.disabledHours,\n        _disabledMinutes = userSettingDisabledTime.disabledMinutes,\n        _disabledSeconds = userSettingDisabledTime.disabledSeconds;\n      var oldDisabledMinutes = _disabledMinutes ? _disabledMinutes() : [];\n      var olddisabledSeconds = _disabledSeconds ? _disabledSeconds() : [];\n      _disabledHours = generateOptions(hours, _disabledHours);\n      _disabledMinutes = generateOptions(minutes, _disabledMinutes);\n      _disabledSeconds = generateOptions(second, _disabledSeconds);\n      return {\n        disabledHours: function disabledHours() {\n          return _disabledHours;\n        },\n        disabledMinutes: function disabledMinutes(hour) {\n          if (hour === hours) {\n            return _disabledMinutes;\n          }\n          return oldDisabledMinutes;\n        },\n        disabledSeconds: function disabledSeconds(hour, minute) {\n          if (hour === hours && minute === minutes) {\n            return _disabledSeconds;\n          }\n          return olddisabledSeconds;\n        }\n      };\n    }\n    return userSettingDisabledTime;\n  };\n  this.isAllowedDateAndTime = function (selectedValue) {\n    return isAllowedDate(selectedValue[0], _this2.props.disabledDate, _this2.disabledStartTime) && isAllowedDate(selectedValue[1], _this2.props.disabledDate, _this2.disabledEndTime);\n  };\n  this.isMonthYearPanelShow = function (mode) {\n    return ['month', 'year', 'decade'].indexOf(mode) > -1;\n  };\n  this.hasSelectedValue = function () {\n    var selectedValue = _this2.state.selectedValue;\n    return !!selectedValue[1] && !!selectedValue[0];\n  };\n  this.compare = function (v1, v2) {\n    if (_this2.props.timePicker) {\n      return v1.diff(v2);\n    }\n    return v1.diff(v2, 'days');\n  };\n  this.fireSelectValueChange = function (selectedValue, direct, cause) {\n    var timePicker = _this2.props.timePicker;\n    var prevSelectedValue = _this2.state.prevSelectedValue;\n    if (timePicker && timePicker.props.defaultValue) {\n      var timePickerDefaultValue = timePicker.props.defaultValue;\n      if (!prevSelectedValue[0] && selectedValue[0]) {\n        syncTime(timePickerDefaultValue[0], selectedValue[0]);\n      }\n      if (!prevSelectedValue[1] && selectedValue[1]) {\n        syncTime(timePickerDefaultValue[1], selectedValue[1]);\n      }\n    }\n    if (!('selectedValue' in _this2.props)) {\n      _this2.setState({\n        selectedValue: selectedValue\n      });\n    }\n\n    // 尚未选择过时间，直接输入的话\n    if (!_this2.state.selectedValue[0] || !_this2.state.selectedValue[1]) {\n      var startValue = selectedValue[0] || moment();\n      var endValue = selectedValue[1] || startValue.clone().add(1, 'months');\n      _this2.setState({\n        selectedValue: selectedValue,\n        value: getValueFromSelectedValue([startValue, endValue])\n      });\n    }\n    if (selectedValue[0] && !selectedValue[1]) {\n      _this2.setState({\n        firstSelectedValue: selectedValue[0]\n      });\n      _this2.fireHoverValueChange(selectedValue.concat());\n    }\n    _this2.props.onChange(selectedValue);\n    if (direct || selectedValue[0] && selectedValue[1]) {\n      _this2.setState({\n        prevSelectedValue: selectedValue,\n        firstSelectedValue: null\n      });\n      _this2.fireHoverValueChange([]);\n      _this2.props.onSelect(selectedValue, cause);\n    }\n  };\n  this.fireValueChange = function (value) {\n    var props = _this2.props;\n    if (!('value' in props)) {\n      _this2.setState({\n        value: value\n      });\n    }\n    props.onValueChange(value);\n  };\n  this.fireHoverValueChange = function (hoverValue) {\n    var props = _this2.props;\n    if (!('hoverValue' in props)) {\n      _this2.setState({\n        hoverValue: hoverValue\n      });\n    }\n    props.onHoverChange(hoverValue);\n  };\n  this.clear = function () {\n    _this2.fireSelectValueChange([], true);\n    _this2.props.onClear();\n  };\n  this.disabledStartTime = function (time) {\n    return _this2.props.disabledTime(time, 'start');\n  };\n  this.disabledEndTime = function (time) {\n    return _this2.props.disabledTime(time, 'end');\n  };\n  this.disabledStartMonth = function (month) {\n    var value = _this2.state.value;\n    return month.isSameOrAfter(value[1], 'month');\n  };\n  this.disabledEndMonth = function (month) {\n    var value = _this2.state.value;\n    return month.isSameOrBefore(value[0], 'month');\n  };\n};\npolyfill(RangeCalendar);\nexport default commonMixinWrapper(RangeCalendar);","map":{"version":3,"names":["_extends","_classCallCheck","_possibleConstructorReturn","_inherits","React","PropTypes","moment","classnames","polyfill","KeyCode","CalendarPart","TodayButton","OkButton","TimePickerButton","commonMixinWrapper","propType","defaultProp","syncTime","getTodayTime","isAllowedDate","goTime","goStartMonth","goEndMonth","includesTime","noop","isEmptyArray","arr","Array","isArray","length","every","i","isArraysEqual","a","b","getValueFromSelectedValue","selectedValue","start","end","newEnd","isSame","clone","add","normalizeAnchor","props","init","defaultSelectedValue","value","defaultValue","normalizedValue","generateOptions","extraOptionGen","concat","indexOf","push","onInputSelect","direction","cause","originalValue","state","index","compare","showTimePicker","undefined","fireSelectValueChange","source","RangeCalendar","_React$Component","_this","call","_initialiseProps","prevSelectedValue","firstSelectedValue","hoverValue","mode","getDerivedStateFromProps","nextProps","newState","prototype","render","_className","_classnames","prefixCls","dateInputPlaceholder","seperator","timePicker","showOk","locale","showClear","showToday","type","clearIcon","className","visible","showWeekNumber","classes","newProps","onSelect","onDayHover","placeholder1","placeholder2","showOkButton","cls","startValue","getStartValue","endValue","getEndValue","todayTime","thisMonth","month","thisYear","year","isTodayInView","nextMonthOfStart","isClosestMonths","extraFooter","renderFooter","createElement","ref","saveRoot","style","tabIndex","onKeyDown","renderSidebar","role","title","clear","onClick","onMouseLeave","onDatePanelLeave","onMouseEnter","onDatePanelEnter","disabledTime","disabledStartTime","disabledMonth","disabledStartMonth","format","getFormat","placeholder","onInputChange","onStartInputChange","onStartInputSelect","onValueChange","onStartValueChange","onPanelChange","onStartPanelChange","showDateInput","enablePrev","enableNext","isMonthYearPanelShow","timePickerDisabledTime","getEndDisableTime","onEndInputChange","onEndInputSelect","onEndValueChange","onEndPanelChange","disabledEndTime","disabledEndMonth","disabled","onToday","text","backToToday","onOpenTimePicker","onCloseTimePicker","timePickerDisabled","hasSelectedValue","onOk","okDisabled","isAllowedDateAndTime","Component","propTypes","string","any","arrayOf","oneOf","bool","array","func","object","onChange","onHoverChange","oneOfType","onClear","disabledDate","node","defaultProps","_this2","fireHoverValueChange","_state","nextSelectedValue","event","target","nodeName","toLowerCase","keyCode","ctrlKey","metaKey","_state2","_props","updateHoverPoint","currentHoverTime","nextHoverTime","nextHoverValue","miss","some","ht","newValue","slice","sort","t1","t2","valueOf","fireValueChange","oriValueIndex","findIndex","time","_newValue","preventDefault","DOWN","UP","LEFT","RIGHT","HOME","END","PAGE_DOWN","PAGE_UP","ENTER","lastValue","_state3","setState","_len","arguments","oargs","_key","args","apply","_len2","_key2","leftValue","rightValue","newMode","_state4","_state5","userSettingDisabledTime","hours","hour","minutes","minute","second","_disabledHours","disabledHours","_disabledMinutes","disabledMinutes","_disabledSeconds","disabledSeconds","oldDisabledMinutes","olddisabledSeconds","v1","v2","diff","direct","timePickerDefaultValue","isSameOrAfter","isSameOrBefore"],"sources":["C:/Users/ajayg/Desktop/vssample/stock_mocker/client/node_modules/rc-calendar/es/RangeCalendar.js"],"sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\r\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\r\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\r\nimport _inherits from 'babel-runtime/helpers/inherits';\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport moment from 'moment';\r\nimport classnames from 'classnames';\r\nimport { polyfill } from 'react-lifecycles-compat';\r\nimport KeyCode from 'rc-util/es/KeyCode';\r\nimport CalendarPart from './range-calendar/CalendarPart';\r\nimport TodayButton from './calendar/TodayButton';\r\nimport OkButton from './calendar/OkButton';\r\nimport TimePickerButton from './calendar/TimePickerButton';\r\nimport { commonMixinWrapper, propType, defaultProp } from './mixin/CommonMixin';\r\nimport { syncTime, getTodayTime, isAllowedDate } from './util';\r\nimport { goTime, goStartMonth, goEndMonth, includesTime } from './util/toTime';\r\n\r\nfunction noop() {}\r\n\r\nfunction isEmptyArray(arr) {\r\n  return Array.isArray(arr) && (arr.length === 0 || arr.every(function (i) {\r\n    return !i;\r\n  }));\r\n}\r\n\r\nfunction isArraysEqual(a, b) {\r\n  if (a === b) return true;\r\n  if (a === null || typeof a === 'undefined' || b === null || typeof b === 'undefined') {\r\n    return false;\r\n  }\r\n  if (a.length !== b.length) return false;\r\n\r\n  for (var i = 0; i < a.length; ++i) {\r\n    if (a[i] !== b[i]) return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction getValueFromSelectedValue(selectedValue) {\r\n  var start = selectedValue[0],\r\n      end = selectedValue[1];\r\n\r\n  var newEnd = end && end.isSame(start, 'month') ? end.clone().add(1, 'month') : end;\r\n  return [start, newEnd];\r\n}\r\n\r\nfunction normalizeAnchor(props, init) {\r\n  var selectedValue = props.selectedValue || init && props.defaultSelectedValue;\r\n  var value = props.value || init && props.defaultValue;\r\n  var normalizedValue = value ? getValueFromSelectedValue(value) : getValueFromSelectedValue(selectedValue);\r\n  return !isEmptyArray(normalizedValue) ? normalizedValue : init && [moment(), moment().add(1, 'months')];\r\n}\r\n\r\nfunction generateOptions(length, extraOptionGen) {\r\n  var arr = extraOptionGen ? extraOptionGen().concat() : [];\r\n  for (var value = 0; value < length; value++) {\r\n    if (arr.indexOf(value) === -1) {\r\n      arr.push(value);\r\n    }\r\n  }\r\n  return arr;\r\n}\r\n\r\nfunction onInputSelect(direction, value, cause) {\r\n  if (!value) {\r\n    return;\r\n  }\r\n  var originalValue = this.state.selectedValue;\r\n  var selectedValue = originalValue.concat();\r\n  var index = direction === 'left' ? 0 : 1;\r\n  selectedValue[index] = value;\r\n  if (selectedValue[0] && this.compare(selectedValue[0], selectedValue[1]) > 0) {\r\n    selectedValue[1 - index] = this.state.showTimePicker ? selectedValue[index] : undefined;\r\n  }\r\n  this.props.onInputSelect(selectedValue);\r\n  this.fireSelectValueChange(selectedValue, null, cause || { source: 'dateInput' });\r\n}\r\n\r\nvar RangeCalendar = function (_React$Component) {\r\n  _inherits(RangeCalendar, _React$Component);\r\n\r\n  function RangeCalendar(props) {\r\n    _classCallCheck(this, RangeCalendar);\r\n\r\n    var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\r\n\r\n    _initialiseProps.call(_this);\r\n\r\n    var selectedValue = props.selectedValue || props.defaultSelectedValue;\r\n    var value = normalizeAnchor(props, 1);\r\n    _this.state = {\r\n      selectedValue: selectedValue,\r\n      prevSelectedValue: selectedValue,\r\n      firstSelectedValue: null,\r\n      hoverValue: props.hoverValue || [],\r\n      value: value,\r\n      showTimePicker: false,\r\n      mode: props.mode || ['date', 'date']\r\n    };\r\n    return _this;\r\n  }\r\n\r\n  RangeCalendar.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, state) {\r\n    var newState = {};\r\n    if ('value' in nextProps) {\r\n      newState.value = normalizeAnchor(nextProps, 0);\r\n    }\r\n    if ('hoverValue' in nextProps && !isArraysEqual(state.hoverValue, nextProps.hoverValue)) {\r\n      newState.hoverValue = nextProps.hoverValue;\r\n    }\r\n    if ('selectedValue' in nextProps) {\r\n      newState.selectedValue = nextProps.selectedValue;\r\n      newState.prevSelectedValue = nextProps.selectedValue;\r\n    }\r\n    if ('mode' in nextProps && !isArraysEqual(state.mode, nextProps.mode)) {\r\n      newState = { mode: nextProps.mode };\r\n    }\r\n    return newState;\r\n  };\r\n\r\n  // get disabled hours for second picker\r\n\r\n\r\n  RangeCalendar.prototype.render = function render() {\r\n    var _className, _classnames;\r\n\r\n    var props = this.props,\r\n        state = this.state;\r\n    var prefixCls = props.prefixCls,\r\n        dateInputPlaceholder = props.dateInputPlaceholder,\r\n        seperator = props.seperator,\r\n        timePicker = props.timePicker,\r\n        showOk = props.showOk,\r\n        locale = props.locale,\r\n        showClear = props.showClear,\r\n        showToday = props.showToday,\r\n        type = props.type,\r\n        clearIcon = props.clearIcon;\r\n    var hoverValue = state.hoverValue,\r\n        selectedValue = state.selectedValue,\r\n        mode = state.mode,\r\n        showTimePicker = state.showTimePicker;\r\n\r\n    var className = (_className = {}, _className[props.className] = !!props.className, _className[prefixCls] = 1, _className[prefixCls + '-hidden'] = !props.visible, _className[prefixCls + '-range'] = 1, _className[prefixCls + '-show-time-picker'] = showTimePicker, _className[prefixCls + '-week-number'] = props.showWeekNumber, _className);\r\n    var classes = classnames(className);\r\n    var newProps = {\r\n      selectedValue: state.selectedValue,\r\n      onSelect: this.onSelect,\r\n      onDayHover: type === 'start' && selectedValue[1] || type === 'end' && selectedValue[0] || !!hoverValue.length ? this.onDayHover : undefined\r\n    };\r\n\r\n    var placeholder1 = void 0;\r\n    var placeholder2 = void 0;\r\n\r\n    if (dateInputPlaceholder) {\r\n      if (Array.isArray(dateInputPlaceholder)) {\r\n        placeholder1 = dateInputPlaceholder[0];\r\n        placeholder2 = dateInputPlaceholder[1];\r\n      } else {\r\n        placeholder1 = placeholder2 = dateInputPlaceholder;\r\n      }\r\n    }\r\n    var showOkButton = showOk === true || showOk !== false && !!timePicker;\r\n    var cls = classnames((_classnames = {}, _classnames[prefixCls + '-footer'] = true, _classnames[prefixCls + '-range-bottom'] = true, _classnames[prefixCls + '-footer-show-ok'] = showOkButton, _classnames));\r\n\r\n    var startValue = this.getStartValue();\r\n    var endValue = this.getEndValue();\r\n    var todayTime = getTodayTime(startValue);\r\n    var thisMonth = todayTime.month();\r\n    var thisYear = todayTime.year();\r\n    var isTodayInView = startValue.year() === thisYear && startValue.month() === thisMonth || endValue.year() === thisYear && endValue.month() === thisMonth;\r\n    var nextMonthOfStart = startValue.clone().add(1, 'months');\r\n    var isClosestMonths = nextMonthOfStart.year() === endValue.year() && nextMonthOfStart.month() === endValue.month();\r\n\r\n    // console.warn('Render:', selectedValue.map(t => t.format('YYYY-MM-DD')).join(', '));\r\n    // console.log('start:', startValue.format('YYYY-MM-DD'));\r\n    // console.log('end:', endValue.format('YYYY-MM-DD'));\r\n\r\n    var extraFooter = props.renderFooter();\r\n\r\n    return React.createElement(\r\n      'div',\r\n      {\r\n        ref: this.saveRoot,\r\n        className: classes,\r\n        style: props.style,\r\n        tabIndex: '0',\r\n        onKeyDown: this.onKeyDown\r\n      },\r\n      props.renderSidebar(),\r\n      React.createElement(\r\n        'div',\r\n        { className: prefixCls + '-panel' },\r\n        showClear && selectedValue[0] && selectedValue[1] ? React.createElement(\r\n          'a',\r\n          {\r\n            role: 'button',\r\n            title: locale.clear,\r\n            onClick: this.clear\r\n          },\r\n          clearIcon || React.createElement('span', { className: prefixCls + '-clear-btn' })\r\n        ) : null,\r\n        React.createElement(\r\n          'div',\r\n          {\r\n            className: prefixCls + '-date-panel',\r\n            onMouseLeave: type !== 'both' ? this.onDatePanelLeave : undefined,\r\n            onMouseEnter: type !== 'both' ? this.onDatePanelEnter : undefined\r\n          },\r\n          React.createElement(CalendarPart, _extends({}, props, newProps, {\r\n            hoverValue: hoverValue,\r\n            direction: 'left',\r\n            disabledTime: this.disabledStartTime,\r\n            disabledMonth: this.disabledStartMonth,\r\n            format: this.getFormat(),\r\n            value: startValue,\r\n            mode: mode[0],\r\n            placeholder: placeholder1,\r\n            onInputChange: this.onStartInputChange,\r\n            onInputSelect: this.onStartInputSelect,\r\n            onValueChange: this.onStartValueChange,\r\n            onPanelChange: this.onStartPanelChange,\r\n            showDateInput: this.props.showDateInput,\r\n            timePicker: timePicker,\r\n            showTimePicker: showTimePicker,\r\n            enablePrev: true,\r\n            enableNext: !isClosestMonths || this.isMonthYearPanelShow(mode[1]),\r\n            clearIcon: clearIcon\r\n          })),\r\n          React.createElement(\r\n            'span',\r\n            { className: prefixCls + '-range-middle' },\r\n            seperator\r\n          ),\r\n          React.createElement(CalendarPart, _extends({}, props, newProps, {\r\n            hoverValue: hoverValue,\r\n            direction: 'right',\r\n            format: this.getFormat(),\r\n            timePickerDisabledTime: this.getEndDisableTime(),\r\n            placeholder: placeholder2,\r\n            value: endValue,\r\n            mode: mode[1],\r\n            onInputChange: this.onEndInputChange,\r\n            onInputSelect: this.onEndInputSelect,\r\n            onValueChange: this.onEndValueChange,\r\n            onPanelChange: this.onEndPanelChange,\r\n            showDateInput: this.props.showDateInput,\r\n            timePicker: timePicker,\r\n            showTimePicker: showTimePicker,\r\n            disabledTime: this.disabledEndTime,\r\n            disabledMonth: this.disabledEndMonth,\r\n            enablePrev: !isClosestMonths || this.isMonthYearPanelShow(mode[0]),\r\n            enableNext: true,\r\n            clearIcon: clearIcon\r\n          }))\r\n        ),\r\n        React.createElement(\r\n          'div',\r\n          { className: cls },\r\n          showToday || props.timePicker || showOkButton || extraFooter ? React.createElement(\r\n            'div',\r\n            { className: prefixCls + '-footer-btn' },\r\n            extraFooter,\r\n            showToday ? React.createElement(TodayButton, _extends({}, props, {\r\n              disabled: isTodayInView,\r\n              value: state.value[0],\r\n              onToday: this.onToday,\r\n              text: locale.backToToday\r\n            })) : null,\r\n            props.timePicker ? React.createElement(TimePickerButton, _extends({}, props, {\r\n              showTimePicker: showTimePicker,\r\n              onOpenTimePicker: this.onOpenTimePicker,\r\n              onCloseTimePicker: this.onCloseTimePicker,\r\n              timePickerDisabled: !this.hasSelectedValue() || hoverValue.length\r\n            })) : null,\r\n            showOkButton ? React.createElement(OkButton, _extends({}, props, {\r\n              onOk: this.onOk,\r\n              okDisabled: !this.isAllowedDateAndTime(selectedValue) || !this.hasSelectedValue() || hoverValue.length\r\n            })) : null\r\n          ) : null\r\n        )\r\n      )\r\n    );\r\n  };\r\n\r\n  return RangeCalendar;\r\n}(React.Component);\r\n\r\nRangeCalendar.propTypes = _extends({}, propType, {\r\n  prefixCls: PropTypes.string,\r\n  dateInputPlaceholder: PropTypes.any,\r\n  seperator: PropTypes.string,\r\n  defaultValue: PropTypes.any,\r\n  value: PropTypes.any,\r\n  hoverValue: PropTypes.any,\r\n  mode: PropTypes.arrayOf(PropTypes.oneOf(['date', 'month', 'year', 'decade'])),\r\n  showDateInput: PropTypes.bool,\r\n  timePicker: PropTypes.any,\r\n  showOk: PropTypes.bool,\r\n  showToday: PropTypes.bool,\r\n  defaultSelectedValue: PropTypes.array,\r\n  selectedValue: PropTypes.array,\r\n  onOk: PropTypes.func,\r\n  showClear: PropTypes.bool,\r\n  locale: PropTypes.object,\r\n  onChange: PropTypes.func,\r\n  onSelect: PropTypes.func,\r\n  onValueChange: PropTypes.func,\r\n  onHoverChange: PropTypes.func,\r\n  onPanelChange: PropTypes.func,\r\n  format: PropTypes.oneOfType([PropTypes.object, PropTypes.string]),\r\n  onClear: PropTypes.func,\r\n  type: PropTypes.any,\r\n  disabledDate: PropTypes.func,\r\n  disabledTime: PropTypes.func,\r\n  clearIcon: PropTypes.node,\r\n  onKeyDown: PropTypes.func\r\n});\r\nRangeCalendar.defaultProps = _extends({}, defaultProp, {\r\n  type: 'both',\r\n  seperator: '~',\r\n  defaultSelectedValue: [],\r\n  onValueChange: noop,\r\n  onHoverChange: noop,\r\n  onPanelChange: noop,\r\n  disabledTime: noop,\r\n  onInputSelect: noop,\r\n  showToday: true,\r\n  showDateInput: true\r\n});\r\n\r\nvar _initialiseProps = function _initialiseProps() {\r\n  var _this2 = this;\r\n\r\n  this.onDatePanelEnter = function () {\r\n    if (_this2.hasSelectedValue()) {\r\n      _this2.fireHoverValueChange(_this2.state.selectedValue.concat());\r\n    }\r\n  };\r\n\r\n  this.onDatePanelLeave = function () {\r\n    if (_this2.hasSelectedValue()) {\r\n      _this2.fireHoverValueChange([]);\r\n    }\r\n  };\r\n\r\n  this.onSelect = function (value) {\r\n    var type = _this2.props.type;\r\n    var _state = _this2.state,\r\n        selectedValue = _state.selectedValue,\r\n        prevSelectedValue = _state.prevSelectedValue,\r\n        firstSelectedValue = _state.firstSelectedValue;\r\n\r\n    var nextSelectedValue = void 0;\r\n    if (type === 'both') {\r\n      if (!firstSelectedValue) {\r\n        syncTime(prevSelectedValue[0], value);\r\n        nextSelectedValue = [value];\r\n      } else if (_this2.compare(firstSelectedValue, value) < 0) {\r\n        syncTime(prevSelectedValue[1], value);\r\n        nextSelectedValue = [firstSelectedValue, value];\r\n      } else {\r\n        syncTime(prevSelectedValue[0], value);\r\n        syncTime(prevSelectedValue[1], firstSelectedValue);\r\n        nextSelectedValue = [value, firstSelectedValue];\r\n      }\r\n    } else if (type === 'start') {\r\n      syncTime(prevSelectedValue[0], value);\r\n      var endValue = selectedValue[1];\r\n      nextSelectedValue = endValue && _this2.compare(endValue, value) > 0 ? [value, endValue] : [value];\r\n    } else {\r\n      // type === 'end'\r\n      var startValue = selectedValue[0];\r\n      if (startValue && _this2.compare(startValue, value) <= 0) {\r\n        syncTime(prevSelectedValue[1], value);\r\n        nextSelectedValue = [startValue, value];\r\n      } else {\r\n        syncTime(prevSelectedValue[0], value);\r\n        nextSelectedValue = [value];\r\n      }\r\n    }\r\n\r\n    _this2.fireSelectValueChange(nextSelectedValue);\r\n  };\r\n\r\n  this.onKeyDown = function (event) {\r\n    if (event.target.nodeName.toLowerCase() === 'input') {\r\n      return;\r\n    }\r\n\r\n    var keyCode = event.keyCode;\r\n\r\n    var ctrlKey = event.ctrlKey || event.metaKey;\r\n\r\n    var _state2 = _this2.state,\r\n        selectedValue = _state2.selectedValue,\r\n        hoverValue = _state2.hoverValue,\r\n        firstSelectedValue = _state2.firstSelectedValue,\r\n        value = _state2.value;\r\n    var _props = _this2.props,\r\n        onKeyDown = _props.onKeyDown,\r\n        disabledDate = _props.disabledDate;\r\n\r\n    // Update last time of the picker\r\n\r\n    var updateHoverPoint = function updateHoverPoint(func) {\r\n      // Change hover to make focus in UI\r\n      var currentHoverTime = void 0;\r\n      var nextHoverTime = void 0;\r\n      var nextHoverValue = void 0;\r\n\r\n      if (!firstSelectedValue) {\r\n        currentHoverTime = hoverValue[0] || selectedValue[0] || value[0] || moment();\r\n        nextHoverTime = func(currentHoverTime);\r\n        nextHoverValue = [nextHoverTime];\r\n        _this2.fireHoverValueChange(nextHoverValue);\r\n      } else {\r\n        if (hoverValue.length === 1) {\r\n          currentHoverTime = hoverValue[0].clone();\r\n          nextHoverTime = func(currentHoverTime);\r\n          nextHoverValue = _this2.onDayHover(nextHoverTime);\r\n        } else {\r\n          currentHoverTime = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\r\n          nextHoverTime = func(currentHoverTime);\r\n          nextHoverValue = _this2.onDayHover(nextHoverTime);\r\n        }\r\n      }\r\n\r\n      // Find origin hover time on value index\r\n      if (nextHoverValue.length >= 2) {\r\n        var miss = nextHoverValue.some(function (ht) {\r\n          return !includesTime(value, ht, 'month');\r\n        });\r\n        if (miss) {\r\n          var newValue = nextHoverValue.slice().sort(function (t1, t2) {\r\n            return t1.valueOf() - t2.valueOf();\r\n          });\r\n          if (newValue[0].isSame(newValue[1], 'month')) {\r\n            newValue[1] = newValue[0].clone().add(1, 'month');\r\n          }\r\n          _this2.fireValueChange(newValue);\r\n        }\r\n      } else if (nextHoverValue.length === 1) {\r\n        // If only one value, let's keep the origin panel\r\n        var oriValueIndex = value.findIndex(function (time) {\r\n          return time.isSame(currentHoverTime, 'month');\r\n        });\r\n        if (oriValueIndex === -1) oriValueIndex = 0;\r\n\r\n        if (value.every(function (time) {\r\n          return !time.isSame(nextHoverTime, 'month');\r\n        })) {\r\n          var _newValue = value.slice();\r\n          _newValue[oriValueIndex] = nextHoverTime.clone();\r\n          _this2.fireValueChange(_newValue);\r\n        }\r\n      }\r\n\r\n      event.preventDefault();\r\n\r\n      return nextHoverTime;\r\n    };\r\n\r\n    switch (keyCode) {\r\n      case KeyCode.DOWN:\r\n        updateHoverPoint(function (time) {\r\n          return goTime(time, 1, 'weeks');\r\n        });\r\n        return;\r\n      case KeyCode.UP:\r\n        updateHoverPoint(function (time) {\r\n          return goTime(time, -1, 'weeks');\r\n        });\r\n        return;\r\n      case KeyCode.LEFT:\r\n        if (ctrlKey) {\r\n          updateHoverPoint(function (time) {\r\n            return goTime(time, -1, 'years');\r\n          });\r\n        } else {\r\n          updateHoverPoint(function (time) {\r\n            return goTime(time, -1, 'days');\r\n          });\r\n        }\r\n        return;\r\n      case KeyCode.RIGHT:\r\n        if (ctrlKey) {\r\n          updateHoverPoint(function (time) {\r\n            return goTime(time, 1, 'years');\r\n          });\r\n        } else {\r\n          updateHoverPoint(function (time) {\r\n            return goTime(time, 1, 'days');\r\n          });\r\n        }\r\n        return;\r\n      case KeyCode.HOME:\r\n        updateHoverPoint(function (time) {\r\n          return goStartMonth(time);\r\n        });\r\n        return;\r\n      case KeyCode.END:\r\n        updateHoverPoint(function (time) {\r\n          return goEndMonth(time);\r\n        });\r\n        return;\r\n      case KeyCode.PAGE_DOWN:\r\n        updateHoverPoint(function (time) {\r\n          return goTime(time, 1, 'month');\r\n        });\r\n        return;\r\n      case KeyCode.PAGE_UP:\r\n        updateHoverPoint(function (time) {\r\n          return goTime(time, -1, 'month');\r\n        });\r\n        return;\r\n      case KeyCode.ENTER:\r\n        {\r\n          var lastValue = void 0;\r\n          if (hoverValue.length === 0) {\r\n            lastValue = updateHoverPoint(function (time) {\r\n              return time;\r\n            });\r\n          } else if (hoverValue.length === 1) {\r\n            lastValue = hoverValue[0];\r\n          } else {\r\n            lastValue = hoverValue[0].isSame(firstSelectedValue, 'day') ? hoverValue[1] : hoverValue[0];\r\n          }\r\n          if (lastValue && (!disabledDate || !disabledDate(lastValue))) {\r\n            _this2.onSelect(lastValue);\r\n          }\r\n          event.preventDefault();\r\n          return;\r\n        }\r\n      default:\r\n        if (onKeyDown) {\r\n          onKeyDown(event);\r\n        }\r\n    }\r\n  };\r\n\r\n  this.onDayHover = function (value) {\r\n    var hoverValue = [];\r\n    var _state3 = _this2.state,\r\n        selectedValue = _state3.selectedValue,\r\n        firstSelectedValue = _state3.firstSelectedValue;\r\n    var type = _this2.props.type;\r\n\r\n    if (type === 'start' && selectedValue[1]) {\r\n      hoverValue = _this2.compare(value, selectedValue[1]) < 0 ? [value, selectedValue[1]] : [value];\r\n    } else if (type === 'end' && selectedValue[0]) {\r\n      hoverValue = _this2.compare(value, selectedValue[0]) > 0 ? [selectedValue[0], value] : [];\r\n    } else {\r\n      if (!firstSelectedValue) {\r\n        if (_this2.state.hoverValue.length) {\r\n          _this2.setState({ hoverValue: [] });\r\n        }\r\n        return hoverValue;\r\n      }\r\n      hoverValue = _this2.compare(value, firstSelectedValue) < 0 ? [value, firstSelectedValue] : [firstSelectedValue, value];\r\n    }\r\n    _this2.fireHoverValueChange(hoverValue);\r\n\r\n    return hoverValue;\r\n  };\r\n\r\n  this.onToday = function () {\r\n    var startValue = getTodayTime(_this2.state.value[0]);\r\n    var endValue = startValue.clone().add(1, 'months');\r\n    _this2.setState({ value: [startValue, endValue] });\r\n  };\r\n\r\n  this.onOpenTimePicker = function () {\r\n    _this2.setState({\r\n      showTimePicker: true\r\n    });\r\n  };\r\n\r\n  this.onCloseTimePicker = function () {\r\n    _this2.setState({\r\n      showTimePicker: false\r\n    });\r\n  };\r\n\r\n  this.onOk = function () {\r\n    var selectedValue = _this2.state.selectedValue;\r\n\r\n    if (_this2.isAllowedDateAndTime(selectedValue)) {\r\n      _this2.props.onOk(_this2.state.selectedValue);\r\n    }\r\n  };\r\n\r\n  this.onStartInputChange = function () {\r\n    for (var _len = arguments.length, oargs = Array(_len), _key = 0; _key < _len; _key++) {\r\n      oargs[_key] = arguments[_key];\r\n    }\r\n\r\n    var args = ['left'].concat(oargs);\r\n    return onInputSelect.apply(_this2, args);\r\n  };\r\n\r\n  this.onEndInputChange = function () {\r\n    for (var _len2 = arguments.length, oargs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n      oargs[_key2] = arguments[_key2];\r\n    }\r\n\r\n    var args = ['right'].concat(oargs);\r\n    return onInputSelect.apply(_this2, args);\r\n  };\r\n\r\n  this.onStartInputSelect = function (value) {\r\n    var args = ['left', value, { source: 'dateInputSelect' }];\r\n    return onInputSelect.apply(_this2, args);\r\n  };\r\n\r\n  this.onEndInputSelect = function (value) {\r\n    var args = ['right', value, { source: 'dateInputSelect' }];\r\n    return onInputSelect.apply(_this2, args);\r\n  };\r\n\r\n  this.onStartValueChange = function (leftValue) {\r\n    var value = [].concat(_this2.state.value);\r\n    value[0] = leftValue;\r\n    return _this2.fireValueChange(value);\r\n  };\r\n\r\n  this.onEndValueChange = function (rightValue) {\r\n    var value = [].concat(_this2.state.value);\r\n    value[1] = rightValue;\r\n    return _this2.fireValueChange(value);\r\n  };\r\n\r\n  this.onStartPanelChange = function (value, mode) {\r\n    var props = _this2.props,\r\n        state = _this2.state;\r\n\r\n    var newMode = [mode, state.mode[1]];\r\n    if (!('mode' in props)) {\r\n      _this2.setState({\r\n        mode: newMode\r\n      });\r\n    }\r\n    var newValue = [value || state.value[0], state.value[1]];\r\n    props.onPanelChange(newValue, newMode);\r\n  };\r\n\r\n  this.onEndPanelChange = function (value, mode) {\r\n    var props = _this2.props,\r\n        state = _this2.state;\r\n\r\n    var newMode = [state.mode[0], mode];\r\n    if (!('mode' in props)) {\r\n      _this2.setState({\r\n        mode: newMode\r\n      });\r\n    }\r\n    var newValue = [state.value[0], value || state.value[1]];\r\n    props.onPanelChange(newValue, newMode);\r\n  };\r\n\r\n  this.getStartValue = function () {\r\n    var value = _this2.state.value[0];\r\n    var selectedValue = _this2.state.selectedValue;\r\n    // keep selectedTime when select date\r\n    if (selectedValue[0] && _this2.props.timePicker) {\r\n      value = value.clone();\r\n      syncTime(selectedValue[0], value);\r\n    }\r\n    if (_this2.state.showTimePicker && selectedValue[0]) {\r\n      return selectedValue[0];\r\n    }\r\n    return value;\r\n  };\r\n\r\n  this.getEndValue = function () {\r\n    var _state4 = _this2.state,\r\n        value = _state4.value,\r\n        selectedValue = _state4.selectedValue,\r\n        showTimePicker = _state4.showTimePicker;\r\n\r\n    var endValue = value[1] ? value[1].clone() : value[0].clone().add(1, 'month');\r\n    // keep selectedTime when select date\r\n    if (selectedValue[1] && _this2.props.timePicker) {\r\n      syncTime(selectedValue[1], endValue);\r\n    }\r\n    if (showTimePicker) {\r\n      return selectedValue[1] ? selectedValue[1] : _this2.getStartValue();\r\n    }\r\n    return endValue;\r\n  };\r\n\r\n  this.getEndDisableTime = function () {\r\n    var _state5 = _this2.state,\r\n        selectedValue = _state5.selectedValue,\r\n        value = _state5.value;\r\n    var disabledTime = _this2.props.disabledTime;\r\n\r\n    var userSettingDisabledTime = disabledTime(selectedValue, 'end') || {};\r\n    var startValue = selectedValue && selectedValue[0] || value[0].clone();\r\n    // if startTime and endTime is same day..\r\n    // the second time picker will not able to pick time before first time picker\r\n    if (!selectedValue[1] || startValue.isSame(selectedValue[1], 'day')) {\r\n      var hours = startValue.hour();\r\n      var minutes = startValue.minute();\r\n      var second = startValue.second();\r\n      var _disabledHours = userSettingDisabledTime.disabledHours,\r\n          _disabledMinutes = userSettingDisabledTime.disabledMinutes,\r\n          _disabledSeconds = userSettingDisabledTime.disabledSeconds;\r\n\r\n      var oldDisabledMinutes = _disabledMinutes ? _disabledMinutes() : [];\r\n      var olddisabledSeconds = _disabledSeconds ? _disabledSeconds() : [];\r\n      _disabledHours = generateOptions(hours, _disabledHours);\r\n      _disabledMinutes = generateOptions(minutes, _disabledMinutes);\r\n      _disabledSeconds = generateOptions(second, _disabledSeconds);\r\n      return {\r\n        disabledHours: function disabledHours() {\r\n          return _disabledHours;\r\n        },\r\n        disabledMinutes: function disabledMinutes(hour) {\r\n          if (hour === hours) {\r\n            return _disabledMinutes;\r\n          }\r\n          return oldDisabledMinutes;\r\n        },\r\n        disabledSeconds: function disabledSeconds(hour, minute) {\r\n          if (hour === hours && minute === minutes) {\r\n            return _disabledSeconds;\r\n          }\r\n          return olddisabledSeconds;\r\n        }\r\n      };\r\n    }\r\n    return userSettingDisabledTime;\r\n  };\r\n\r\n  this.isAllowedDateAndTime = function (selectedValue) {\r\n    return isAllowedDate(selectedValue[0], _this2.props.disabledDate, _this2.disabledStartTime) && isAllowedDate(selectedValue[1], _this2.props.disabledDate, _this2.disabledEndTime);\r\n  };\r\n\r\n  this.isMonthYearPanelShow = function (mode) {\r\n    return ['month', 'year', 'decade'].indexOf(mode) > -1;\r\n  };\r\n\r\n  this.hasSelectedValue = function () {\r\n    var selectedValue = _this2.state.selectedValue;\r\n\r\n    return !!selectedValue[1] && !!selectedValue[0];\r\n  };\r\n\r\n  this.compare = function (v1, v2) {\r\n    if (_this2.props.timePicker) {\r\n      return v1.diff(v2);\r\n    }\r\n    return v1.diff(v2, 'days');\r\n  };\r\n\r\n  this.fireSelectValueChange = function (selectedValue, direct, cause) {\r\n    var timePicker = _this2.props.timePicker;\r\n    var prevSelectedValue = _this2.state.prevSelectedValue;\r\n\r\n    if (timePicker && timePicker.props.defaultValue) {\r\n      var timePickerDefaultValue = timePicker.props.defaultValue;\r\n      if (!prevSelectedValue[0] && selectedValue[0]) {\r\n        syncTime(timePickerDefaultValue[0], selectedValue[0]);\r\n      }\r\n      if (!prevSelectedValue[1] && selectedValue[1]) {\r\n        syncTime(timePickerDefaultValue[1], selectedValue[1]);\r\n      }\r\n    }\r\n\r\n    if (!('selectedValue' in _this2.props)) {\r\n      _this2.setState({\r\n        selectedValue: selectedValue\r\n      });\r\n    }\r\n\r\n    // 尚未选择过时间，直接输入的话\r\n    if (!_this2.state.selectedValue[0] || !_this2.state.selectedValue[1]) {\r\n      var startValue = selectedValue[0] || moment();\r\n      var endValue = selectedValue[1] || startValue.clone().add(1, 'months');\r\n      _this2.setState({\r\n        selectedValue: selectedValue,\r\n        value: getValueFromSelectedValue([startValue, endValue])\r\n      });\r\n    }\r\n\r\n    if (selectedValue[0] && !selectedValue[1]) {\r\n      _this2.setState({ firstSelectedValue: selectedValue[0] });\r\n      _this2.fireHoverValueChange(selectedValue.concat());\r\n    }\r\n    _this2.props.onChange(selectedValue);\r\n    if (direct || selectedValue[0] && selectedValue[1]) {\r\n      _this2.setState({\r\n        prevSelectedValue: selectedValue,\r\n        firstSelectedValue: null\r\n      });\r\n      _this2.fireHoverValueChange([]);\r\n      _this2.props.onSelect(selectedValue, cause);\r\n    }\r\n  };\r\n\r\n  this.fireValueChange = function (value) {\r\n    var props = _this2.props;\r\n    if (!('value' in props)) {\r\n      _this2.setState({\r\n        value: value\r\n      });\r\n    }\r\n    props.onValueChange(value);\r\n  };\r\n\r\n  this.fireHoverValueChange = function (hoverValue) {\r\n    var props = _this2.props;\r\n    if (!('hoverValue' in props)) {\r\n      _this2.setState({ hoverValue: hoverValue });\r\n    }\r\n    props.onHoverChange(hoverValue);\r\n  };\r\n\r\n  this.clear = function () {\r\n    _this2.fireSelectValueChange([], true);\r\n    _this2.props.onClear();\r\n  };\r\n\r\n  this.disabledStartTime = function (time) {\r\n    return _this2.props.disabledTime(time, 'start');\r\n  };\r\n\r\n  this.disabledEndTime = function (time) {\r\n    return _this2.props.disabledTime(time, 'end');\r\n  };\r\n\r\n  this.disabledStartMonth = function (month) {\r\n    var value = _this2.state.value;\r\n\r\n    return month.isSameOrAfter(value[1], 'month');\r\n  };\r\n\r\n  this.disabledEndMonth = function (month) {\r\n    var value = _this2.state.value;\r\n\r\n    return month.isSameOrBefore(value[0], 'month');\r\n  };\r\n};\r\n\r\npolyfill(RangeCalendar);\r\n\r\nexport default commonMixinWrapper(RangeCalendar);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}