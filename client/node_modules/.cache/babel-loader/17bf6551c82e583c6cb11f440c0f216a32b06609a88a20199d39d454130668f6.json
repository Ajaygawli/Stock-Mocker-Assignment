{"ast":null,"code":"/**\r\n * Copyright (c) 2013-present, Facebook, Inc.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the BSD-style license found in the\r\n * LICENSE file in the root directory of this source tree. An additional grant\r\n * of patent rights can be found in the PATENTS file in the same directory.\r\n *\r\n * @providesModule getUpdatedSelectionState\r\n * @format\r\n * \r\n */\n\n'use strict';\n\nvar DraftOffsetKey = require('./DraftOffsetKey');\nvar nullthrows = require('fbjs/lib/nullthrows');\nfunction getUpdatedSelectionState(editorState, anchorKey, anchorOffset, focusKey, focusOffset) {\n  var selection = nullthrows(editorState.getSelection());\n  if (process.env.NODE_ENV !== 'production') {\n    if (!anchorKey || !focusKey) {\n      /*eslint-disable no-console */\n      console.warn('Invalid selection state.', arguments, editorState.toJS());\n      /*eslint-enable no-console */\n      return selection;\n    }\n  }\n  var anchorPath = DraftOffsetKey.decode(anchorKey);\n  var anchorBlockKey = anchorPath.blockKey;\n  var anchorLeaf = editorState.getBlockTree(anchorBlockKey).getIn([anchorPath.decoratorKey, 'leaves', anchorPath.leafKey]);\n  var focusPath = DraftOffsetKey.decode(focusKey);\n  var focusBlockKey = focusPath.blockKey;\n  var focusLeaf = editorState.getBlockTree(focusBlockKey).getIn([focusPath.decoratorKey, 'leaves', focusPath.leafKey]);\n  var anchorLeafStart = anchorLeaf.get('start');\n  var focusLeafStart = focusLeaf.get('start');\n  var anchorBlockOffset = anchorLeaf ? anchorLeafStart + anchorOffset : null;\n  var focusBlockOffset = focusLeaf ? focusLeafStart + focusOffset : null;\n  var areEqual = selection.getAnchorKey() === anchorBlockKey && selection.getAnchorOffset() === anchorBlockOffset && selection.getFocusKey() === focusBlockKey && selection.getFocusOffset() === focusBlockOffset;\n  if (areEqual) {\n    return selection;\n  }\n  var isBackward = false;\n  if (anchorBlockKey === focusBlockKey) {\n    var anchorLeafEnd = anchorLeaf.get('end');\n    var focusLeafEnd = focusLeaf.get('end');\n    if (focusLeafStart === anchorLeafStart && focusLeafEnd === anchorLeafEnd) {\n      isBackward = focusOffset < anchorOffset;\n    } else {\n      isBackward = focusLeafStart < anchorLeafStart;\n    }\n  } else {\n    var startKey = editorState.getCurrentContent().getBlockMap().keySeq().skipUntil(function (v) {\n      return v === anchorBlockKey || v === focusBlockKey;\n    }).first();\n    isBackward = startKey === focusBlockKey;\n  }\n  return selection.merge({\n    anchorKey: anchorBlockKey,\n    anchorOffset: anchorBlockOffset,\n    focusKey: focusBlockKey,\n    focusOffset: focusBlockOffset,\n    isBackward: isBackward\n  });\n}\nmodule.exports = getUpdatedSelectionState;","map":{"version":3,"names":["DraftOffsetKey","require","nullthrows","getUpdatedSelectionState","editorState","anchorKey","anchorOffset","focusKey","focusOffset","selection","getSelection","process","env","NODE_ENV","console","warn","arguments","toJS","anchorPath","decode","anchorBlockKey","blockKey","anchorLeaf","getBlockTree","getIn","decoratorKey","leafKey","focusPath","focusBlockKey","focusLeaf","anchorLeafStart","get","focusLeafStart","anchorBlockOffset","focusBlockOffset","areEqual","getAnchorKey","getAnchorOffset","getFocusKey","getFocusOffset","isBackward","anchorLeafEnd","focusLeafEnd","startKey","getCurrentContent","getBlockMap","keySeq","skipUntil","v","first","merge","module","exports"],"sources":["C:/Users/ajayg/Desktop/vssample/stock_mocker/client/node_modules/draft-js/lib/getUpdatedSelectionState.js"],"sourcesContent":["/**\r\n * Copyright (c) 2013-present, Facebook, Inc.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the BSD-style license found in the\r\n * LICENSE file in the root directory of this source tree. An additional grant\r\n * of patent rights can be found in the PATENTS file in the same directory.\r\n *\r\n * @providesModule getUpdatedSelectionState\r\n * @format\r\n * \r\n */\r\n\r\n'use strict';\r\n\r\nvar DraftOffsetKey = require('./DraftOffsetKey');\r\n\r\nvar nullthrows = require('fbjs/lib/nullthrows');\r\n\r\nfunction getUpdatedSelectionState(editorState, anchorKey, anchorOffset, focusKey, focusOffset) {\r\n  var selection = nullthrows(editorState.getSelection());\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    if (!anchorKey || !focusKey) {\r\n      /*eslint-disable no-console */\r\n      console.warn('Invalid selection state.', arguments, editorState.toJS());\r\n      /*eslint-enable no-console */\r\n      return selection;\r\n    }\r\n  }\r\n\r\n  var anchorPath = DraftOffsetKey.decode(anchorKey);\r\n  var anchorBlockKey = anchorPath.blockKey;\r\n  var anchorLeaf = editorState.getBlockTree(anchorBlockKey).getIn([anchorPath.decoratorKey, 'leaves', anchorPath.leafKey]);\r\n\r\n  var focusPath = DraftOffsetKey.decode(focusKey);\r\n  var focusBlockKey = focusPath.blockKey;\r\n  var focusLeaf = editorState.getBlockTree(focusBlockKey).getIn([focusPath.decoratorKey, 'leaves', focusPath.leafKey]);\r\n\r\n  var anchorLeafStart = anchorLeaf.get('start');\r\n  var focusLeafStart = focusLeaf.get('start');\r\n\r\n  var anchorBlockOffset = anchorLeaf ? anchorLeafStart + anchorOffset : null;\r\n  var focusBlockOffset = focusLeaf ? focusLeafStart + focusOffset : null;\r\n\r\n  var areEqual = selection.getAnchorKey() === anchorBlockKey && selection.getAnchorOffset() === anchorBlockOffset && selection.getFocusKey() === focusBlockKey && selection.getFocusOffset() === focusBlockOffset;\r\n\r\n  if (areEqual) {\r\n    return selection;\r\n  }\r\n\r\n  var isBackward = false;\r\n  if (anchorBlockKey === focusBlockKey) {\r\n    var anchorLeafEnd = anchorLeaf.get('end');\r\n    var focusLeafEnd = focusLeaf.get('end');\r\n    if (focusLeafStart === anchorLeafStart && focusLeafEnd === anchorLeafEnd) {\r\n      isBackward = focusOffset < anchorOffset;\r\n    } else {\r\n      isBackward = focusLeafStart < anchorLeafStart;\r\n    }\r\n  } else {\r\n    var startKey = editorState.getCurrentContent().getBlockMap().keySeq().skipUntil(function (v) {\r\n      return v === anchorBlockKey || v === focusBlockKey;\r\n    }).first();\r\n    isBackward = startKey === focusBlockKey;\r\n  }\r\n\r\n  return selection.merge({\r\n    anchorKey: anchorBlockKey,\r\n    anchorOffset: anchorBlockOffset,\r\n    focusKey: focusBlockKey,\r\n    focusOffset: focusBlockOffset,\r\n    isBackward: isBackward\r\n  });\r\n}\r\n\r\nmodule.exports = getUpdatedSelectionState;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}