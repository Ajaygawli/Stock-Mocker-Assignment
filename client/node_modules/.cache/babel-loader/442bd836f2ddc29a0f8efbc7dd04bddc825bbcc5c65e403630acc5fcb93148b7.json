{"ast":null,"code":"import _objectSpread from\"C:/Users/ajayg/Desktop/vssample/stock_mocker/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/ajayg/Desktop/vssample/stock_mocker/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ajayg/Desktop/vssample/stock_mocker/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/ajayg/Desktop/vssample/stock_mocker/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/ajayg/Desktop/vssample/stock_mocker/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/ajayg/Desktop/vssample/stock_mocker/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/ajayg/Desktop/vssample/stock_mocker/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{Row,Col,Alert,Spin}from'antd';import{Share}from'../components';import{BuyShare}from'../components';import{getPortfolio,getCash,getStockQuotes}from'../apis';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Portfolio=/*#__PURE__*/function(_Component){_inherits(Portfolio,_Component);var _super=_createSuper(Portfolio);function Portfolio(){var _this;_classCallCheck(this,Portfolio);_this=_super.call(this);_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var portfolio,cash;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_this.setState({pageIsLoading:false});_context2.next=3;return getPortfolio();case 3:portfolio=_context2.sent;_context2.next=6;return getCash();case 6:cash=_context2.sent;_this.setState({portfolio:portfolio,cash:cash});_this.interval=setInterval(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var keys,quotes,total;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:keys=Object.keys(portfolio);_context.next=3;return getStockQuotes(keys);case 3:quotes=_context.sent;total=_this.state.cash;console.log(portfolio);Object.keys(quotes).forEach(function(key){console.log(total);total+=quotes[key].latestPrice*portfolio[key];});_this.setState({quotes:quotes,portfolioTotal:total});case 8:case\"end\":return _context.stop();}},_callee);})),2000);case 9:case\"end\":return _context2.stop();}},_callee2);}));_this.state={portfolio:{},cash:0,quotes:{},portfolioTotal:0};return _this;}_createClass(Portfolio,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearInterval(this.interval);}},{key:\"render\",value:function render(){var _this$state=this.state,portfolio=_this$state.portfolio,cash=_this$state.cash,quotes=_this$state.quotes,portfolioTotal=_this$state.portfolioTotal;return this.props.isPageLoading?/*#__PURE__*/_jsx(Row,{type:\"flex\",justify:\"center\",children:/*#__PURE__*/_jsx(Spin,{size:\"large\"})}):this.props.isLoggedIn?/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(\"h1\",{className:\"page-title\",children:[\"Portfolio ($\",portfolioTotal.toFixed(2),\")\"]})}),/*#__PURE__*/_jsxs(Row,{type:\"flex\",justify:\"center\",children:[/*#__PURE__*/_jsx(Col,{span:10,children:Object.entries(portfolio).length>0?Object.keys(portfolio).map(function(key){return/*#__PURE__*/_jsx(Share,_objectSpread({symbol:key,quantity:portfolio[key]},quotes[key]),key);}):/*#__PURE__*/_jsx(\"h5\",{children:\"Start with buying your first stock on the right.\"})}),/*#__PURE__*/_jsx(Col,{span:3,className:\"portfolio-middle-line\"}),/*#__PURE__*/_jsx(Col,{span:9,offset:2,children:/*#__PURE__*/_jsx(BuyShare,{cash:cash})})]})]}):/*#__PURE__*/_jsx(Alert,{message:\"Warning\",description:\"Please Log in first\",type:\"warning\",showIcon:true});}}]);return Portfolio;}(Component);export default Portfolio;","map":{"version":3,"names":["React","Component","Row","Col","Alert","Spin","Share","BuyShare","getPortfolio","getCash","getStockQuotes","jsx","_jsx","jsxs","_jsxs","Portfolio","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","call","componentDidMount","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","portfolio","cash","wrap","_callee2$","_context2","prev","next","setState","pageIsLoading","sent","interval","setInterval","_callee","keys","quotes","total","_callee$","_context","Object","state","console","log","forEach","key","latestPrice","portfolioTotal","stop","_createClass","value","componentWillUnmount","clearInterval","render","_this$state","props","isPageLoading","type","justify","children","size","isLoggedIn","className","toFixed","span","entries","length","map","_objectSpread","symbol","quantity","offset","message","description","showIcon"],"sources":["C:/Users/ajayg/Desktop/vssample/stock_mocker/client/src/pages/Portfolio.js"],"sourcesContent":["import React, { Component } from 'react'\r\nimport { Row, Col, Alert, Spin } from 'antd'\r\nimport { Share } from '../components'\r\nimport { BuyShare } from '../components'\r\nimport { getPortfolio, getCash, getStockQuotes } from '../apis'\r\n\r\nclass Portfolio extends Component {\r\n\r\n  constructor(){\r\n    super()\r\n    this.state = {\r\n      portfolio: {},\r\n      cash: 0,\r\n      quotes: {},\r\n      portfolioTotal: 0,\r\n    }\r\n  }\r\n\r\n  componentDidMount = async() => {\r\n    this.setState({\r\n      pageIsLoading: false,\r\n    })\r\n    const portfolio = await getPortfolio()\r\n    const cash = await getCash()\r\n    this.setState({\r\n      portfolio: portfolio,\r\n      cash: cash\r\n    })\r\n    this.interval = setInterval( async () => {\r\n      const keys = Object.keys(portfolio)\r\n      const quotes = await getStockQuotes(keys)\r\n      let total = this.state.cash\r\n      console.log(portfolio)\r\n      Object.keys(quotes).forEach( key =>{\r\n        console.log(total)\r\n        total += quotes[key].latestPrice * portfolio[key]\r\n      })\r\n      this.setState({\r\n        quotes : quotes,\r\n        portfolioTotal : total\r\n      })\r\n    },\r\n    2000);\r\n  }\r\n  \r\n  componentWillUnmount() {\r\n    clearInterval(this.interval);\r\n  }\r\n\r\n  render(){\r\n    const { portfolio, cash, quotes, portfolioTotal } = this.state\r\n    return(\r\n      this.props.isPageLoading ?\r\n      <Row type=\"flex\" justify=\"center\">\r\n        <Spin size=\"large\" />\r\n      </Row> \r\n      :\r\n      (this.props.isLoggedIn ?\r\n      <Row>\r\n        <Row>\r\n          <h1 className=\"page-title\">Portfolio (${portfolioTotal.toFixed(2)})</h1>\r\n        </Row>\r\n        <Row type=\"flex\" justify=\"center\">\r\n          <Col span={10}>\r\n            { Object.entries(portfolio).length > 0 ?\r\n              Object.keys(portfolio).map((key) => {\r\n                return <Share \r\n                        symbol={key}\r\n                        key={key}\r\n                        quantity={portfolio[key]}\r\n                        {...quotes[key]}\r\n                      />\r\n              }) :\r\n              <h5>Start with buying your first stock on the right.</h5>\r\n            }\r\n          </Col>\r\n          <Col span={3} className=\"portfolio-middle-line\"></Col>\r\n          <Col span={9} offset={2}>\r\n            <BuyShare cash={cash} />\r\n          </Col>\r\n        </Row>\r\n      </Row>:\r\n      <Alert\r\n        message=\"Warning\"\r\n        description=\"Please Log in first\"\r\n        type=\"warning\"\r\n        showIcon\r\n      />)\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default Portfolio"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}