{"ast":null,"code":"/**\r\n * Copyright (c) 2013-present, Facebook, Inc.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the BSD-style license found in the\r\n * LICENSE file in the root directory of this source tree. An additional grant\r\n * of patent rights can be found in the PATENTS file in the same directory.\r\n *\r\n * @providesModule RichTextEditorUtil\r\n * @format\r\n * \r\n */\n\n'use strict';\n\nvar DraftModifier = require('./DraftModifier');\nvar EditorState = require('./EditorState');\nvar SelectionState = require('./SelectionState');\nvar adjustBlockDepthForContentState = require('./adjustBlockDepthForContentState');\nvar nullthrows = require('fbjs/lib/nullthrows');\nvar RichTextEditorUtil = {\n  currentBlockContainsLink: function currentBlockContainsLink(editorState) {\n    var selection = editorState.getSelection();\n    var contentState = editorState.getCurrentContent();\n    var entityMap = contentState.getEntityMap();\n    return contentState.getBlockForKey(selection.getAnchorKey()).getCharacterList().slice(selection.getStartOffset(), selection.getEndOffset()).some(function (v) {\n      var entity = v.getEntity();\n      return !!entity && entityMap.__get(entity).getType() === 'LINK';\n    });\n  },\n  getCurrentBlockType: function getCurrentBlockType(editorState) {\n    var selection = editorState.getSelection();\n    return editorState.getCurrentContent().getBlockForKey(selection.getStartKey()).getType();\n  },\n  getDataObjectForLinkURL: function getDataObjectForLinkURL(uri) {\n    return {\n      url: uri.toString()\n    };\n  },\n  handleKeyCommand: function handleKeyCommand(editorState, command) {\n    switch (command) {\n      case 'bold':\n        return RichTextEditorUtil.toggleInlineStyle(editorState, 'BOLD');\n      case 'italic':\n        return RichTextEditorUtil.toggleInlineStyle(editorState, 'ITALIC');\n      case 'underline':\n        return RichTextEditorUtil.toggleInlineStyle(editorState, 'UNDERLINE');\n      case 'code':\n        return RichTextEditorUtil.toggleCode(editorState);\n      case 'backspace':\n      case 'backspace-word':\n      case 'backspace-to-start-of-line':\n        return RichTextEditorUtil.onBackspace(editorState);\n      case 'delete':\n      case 'delete-word':\n      case 'delete-to-end-of-block':\n        return RichTextEditorUtil.onDelete(editorState);\n      default:\n        // they may have custom editor commands; ignore those\n        return null;\n    }\n  },\n  insertSoftNewline: function insertSoftNewline(editorState) {\n    var contentState = DraftModifier.insertText(editorState.getCurrentContent(), editorState.getSelection(), '\\n', editorState.getCurrentInlineStyle(), null);\n    var newEditorState = EditorState.push(editorState, contentState, 'insert-characters');\n    return EditorState.forceSelection(newEditorState, contentState.getSelectionAfter());\n  },\n  /**\r\n   * For collapsed selections at the start of styled blocks, backspace should\r\n   * just remove the existing style.\r\n   */\n  onBackspace: function onBackspace(editorState) {\n    var selection = editorState.getSelection();\n    if (!selection.isCollapsed() || selection.getAnchorOffset() || selection.getFocusOffset()) {\n      return null;\n    }\n\n    // First, try to remove a preceding atomic block.\n    var content = editorState.getCurrentContent();\n    var startKey = selection.getStartKey();\n    var blockBefore = content.getBlockBefore(startKey);\n    if (blockBefore && blockBefore.getType() === 'atomic') {\n      var blockMap = content.getBlockMap()['delete'](blockBefore.getKey());\n      var withoutAtomicBlock = content.merge({\n        blockMap: blockMap,\n        selectionAfter: selection\n      });\n      if (withoutAtomicBlock !== content) {\n        return EditorState.push(editorState, withoutAtomicBlock, 'remove-range');\n      }\n    }\n\n    // If that doesn't succeed, try to remove the current block style.\n    var withoutBlockStyle = RichTextEditorUtil.tryToRemoveBlockStyle(editorState);\n    if (withoutBlockStyle) {\n      return EditorState.push(editorState, withoutBlockStyle, 'change-block-type');\n    }\n    return null;\n  },\n  onDelete: function onDelete(editorState) {\n    var selection = editorState.getSelection();\n    if (!selection.isCollapsed()) {\n      return null;\n    }\n    var content = editorState.getCurrentContent();\n    var startKey = selection.getStartKey();\n    var block = content.getBlockForKey(startKey);\n    var length = block.getLength();\n\n    // The cursor is somewhere within the text. Behave normally.\n    if (selection.getStartOffset() < length) {\n      return null;\n    }\n    var blockAfter = content.getBlockAfter(startKey);\n    if (!blockAfter || blockAfter.getType() !== 'atomic') {\n      return null;\n    }\n    var atomicBlockTarget = selection.merge({\n      focusKey: blockAfter.getKey(),\n      focusOffset: blockAfter.getLength()\n    });\n    var withoutAtomicBlock = DraftModifier.removeRange(content, atomicBlockTarget, 'forward');\n    if (withoutAtomicBlock !== content) {\n      return EditorState.push(editorState, withoutAtomicBlock, 'remove-range');\n    }\n    return null;\n  },\n  onTab: function onTab(event, editorState, maxDepth) {\n    var selection = editorState.getSelection();\n    var key = selection.getAnchorKey();\n    if (key !== selection.getFocusKey()) {\n      return editorState;\n    }\n    var content = editorState.getCurrentContent();\n    var block = content.getBlockForKey(key);\n    var type = block.getType();\n    if (type !== 'unordered-list-item' && type !== 'ordered-list-item') {\n      return editorState;\n    }\n    event.preventDefault();\n\n    // Only allow indenting one level beyond the block above, and only if\n    // the block above is a list item as well.\n    var blockAbove = content.getBlockBefore(key);\n    if (!blockAbove) {\n      return editorState;\n    }\n    var typeAbove = blockAbove.getType();\n    if (typeAbove !== 'unordered-list-item' && typeAbove !== 'ordered-list-item') {\n      return editorState;\n    }\n    var depth = block.getDepth();\n    if (!event.shiftKey && depth === maxDepth) {\n      return editorState;\n    }\n    maxDepth = Math.min(blockAbove.getDepth() + 1, maxDepth);\n    var withAdjustment = adjustBlockDepthForContentState(content, selection, event.shiftKey ? -1 : 1, maxDepth);\n    return EditorState.push(editorState, withAdjustment, 'adjust-depth');\n  },\n  toggleBlockType: function toggleBlockType(editorState, blockType) {\n    var selection = editorState.getSelection();\n    var startKey = selection.getStartKey();\n    var endKey = selection.getEndKey();\n    var content = editorState.getCurrentContent();\n    var target = selection;\n\n    // Triple-click can lead to a selection that includes offset 0 of the\n    // following block. The `SelectionState` for this case is accurate, but\n    // we should avoid toggling block type for the trailing block because it\n    // is a confusing interaction.\n    if (startKey !== endKey && selection.getEndOffset() === 0) {\n      var blockBefore = nullthrows(content.getBlockBefore(endKey));\n      endKey = blockBefore.getKey();\n      target = target.merge({\n        anchorKey: startKey,\n        anchorOffset: selection.getStartOffset(),\n        focusKey: endKey,\n        focusOffset: blockBefore.getLength(),\n        isBackward: false\n      });\n    }\n    var hasAtomicBlock = content.getBlockMap().skipWhile(function (_, k) {\n      return k !== startKey;\n    }).reverse().skipWhile(function (_, k) {\n      return k !== endKey;\n    }).some(function (v) {\n      return v.getType() === 'atomic';\n    });\n    if (hasAtomicBlock) {\n      return editorState;\n    }\n    var typeToSet = content.getBlockForKey(startKey).getType() === blockType ? 'unstyled' : blockType;\n    return EditorState.push(editorState, DraftModifier.setBlockType(content, target, typeToSet), 'change-block-type');\n  },\n  toggleCode: function toggleCode(editorState) {\n    var selection = editorState.getSelection();\n    var anchorKey = selection.getAnchorKey();\n    var focusKey = selection.getFocusKey();\n    if (selection.isCollapsed() || anchorKey !== focusKey) {\n      return RichTextEditorUtil.toggleBlockType(editorState, 'code-block');\n    }\n    return RichTextEditorUtil.toggleInlineStyle(editorState, 'CODE');\n  },\n  /**\r\n   * Toggle the specified inline style for the selection. If the\r\n   * user's selection is collapsed, apply or remove the style for the\r\n   * internal state. If it is not collapsed, apply the change directly\r\n   * to the document state.\r\n   */\n  toggleInlineStyle: function toggleInlineStyle(editorState, inlineStyle) {\n    var selection = editorState.getSelection();\n    var currentStyle = editorState.getCurrentInlineStyle();\n\n    // If the selection is collapsed, toggle the specified style on or off and\n    // set the result as the new inline style override. This will then be\n    // used as the inline style for the next character to be inserted.\n    if (selection.isCollapsed()) {\n      return EditorState.setInlineStyleOverride(editorState, currentStyle.has(inlineStyle) ? currentStyle.remove(inlineStyle) : currentStyle.add(inlineStyle));\n    }\n\n    // If characters are selected, immediately apply or remove the\n    // inline style on the document state itself.\n    var content = editorState.getCurrentContent();\n    var newContent;\n\n    // If the style is already present for the selection range, remove it.\n    // Otherwise, apply it.\n    if (currentStyle.has(inlineStyle)) {\n      newContent = DraftModifier.removeInlineStyle(content, selection, inlineStyle);\n    } else {\n      newContent = DraftModifier.applyInlineStyle(content, selection, inlineStyle);\n    }\n    return EditorState.push(editorState, newContent, 'change-inline-style');\n  },\n  toggleLink: function toggleLink(editorState, targetSelection, entityKey) {\n    var withoutLink = DraftModifier.applyEntity(editorState.getCurrentContent(), targetSelection, entityKey);\n    return EditorState.push(editorState, withoutLink, 'apply-entity');\n  },\n  /**\r\n   * When a collapsed cursor is at the start of the first styled block, or\r\n   * an empty styled block, changes block to 'unstyled'. Returns null if\r\n   * block or selection does not meet that criteria.\r\n   */\n  tryToRemoveBlockStyle: function tryToRemoveBlockStyle(editorState) {\n    var selection = editorState.getSelection();\n    var offset = selection.getAnchorOffset();\n    if (selection.isCollapsed() && offset === 0) {\n      var key = selection.getAnchorKey();\n      var content = editorState.getCurrentContent();\n      var block = content.getBlockForKey(key);\n      var firstBlock = content.getFirstBlock();\n      if (block.getLength() > 0 && block !== firstBlock) {\n        return null;\n      }\n      var type = block.getType();\n      var blockBefore = content.getBlockBefore(key);\n      if (type === 'code-block' && blockBefore && blockBefore.getType() === 'code-block' && blockBefore.getLength() !== 0) {\n        return null;\n      }\n      if (type !== 'unstyled') {\n        return DraftModifier.setBlockType(content, selection, 'unstyled');\n      }\n    }\n    return null;\n  }\n};\nmodule.exports = RichTextEditorUtil;","map":{"version":3,"names":["DraftModifier","require","EditorState","SelectionState","adjustBlockDepthForContentState","nullthrows","RichTextEditorUtil","currentBlockContainsLink","editorState","selection","getSelection","contentState","getCurrentContent","entityMap","getEntityMap","getBlockForKey","getAnchorKey","getCharacterList","slice","getStartOffset","getEndOffset","some","v","entity","getEntity","__get","getType","getCurrentBlockType","getStartKey","getDataObjectForLinkURL","uri","url","toString","handleKeyCommand","command","toggleInlineStyle","toggleCode","onBackspace","onDelete","insertSoftNewline","insertText","getCurrentInlineStyle","newEditorState","push","forceSelection","getSelectionAfter","isCollapsed","getAnchorOffset","getFocusOffset","content","startKey","blockBefore","getBlockBefore","blockMap","getBlockMap","getKey","withoutAtomicBlock","merge","selectionAfter","withoutBlockStyle","tryToRemoveBlockStyle","block","length","getLength","blockAfter","getBlockAfter","atomicBlockTarget","focusKey","focusOffset","removeRange","onTab","event","maxDepth","key","getFocusKey","type","preventDefault","blockAbove","typeAbove","depth","getDepth","shiftKey","Math","min","withAdjustment","toggleBlockType","blockType","endKey","getEndKey","target","anchorKey","anchorOffset","isBackward","hasAtomicBlock","skipWhile","_","k","reverse","typeToSet","setBlockType","inlineStyle","currentStyle","setInlineStyleOverride","has","remove","add","newContent","removeInlineStyle","applyInlineStyle","toggleLink","targetSelection","entityKey","withoutLink","applyEntity","offset","firstBlock","getFirstBlock","module","exports"],"sources":["C:/Users/ajayg/Desktop/vssample/stock_mocker/client/node_modules/draft-js/lib/RichTextEditorUtil.js"],"sourcesContent":["/**\r\n * Copyright (c) 2013-present, Facebook, Inc.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the BSD-style license found in the\r\n * LICENSE file in the root directory of this source tree. An additional grant\r\n * of patent rights can be found in the PATENTS file in the same directory.\r\n *\r\n * @providesModule RichTextEditorUtil\r\n * @format\r\n * \r\n */\r\n\r\n'use strict';\r\n\r\nvar DraftModifier = require('./DraftModifier');\r\nvar EditorState = require('./EditorState');\r\nvar SelectionState = require('./SelectionState');\r\n\r\nvar adjustBlockDepthForContentState = require('./adjustBlockDepthForContentState');\r\nvar nullthrows = require('fbjs/lib/nullthrows');\r\n\r\nvar RichTextEditorUtil = {\r\n  currentBlockContainsLink: function currentBlockContainsLink(editorState) {\r\n    var selection = editorState.getSelection();\r\n    var contentState = editorState.getCurrentContent();\r\n    var entityMap = contentState.getEntityMap();\r\n    return contentState.getBlockForKey(selection.getAnchorKey()).getCharacterList().slice(selection.getStartOffset(), selection.getEndOffset()).some(function (v) {\r\n      var entity = v.getEntity();\r\n      return !!entity && entityMap.__get(entity).getType() === 'LINK';\r\n    });\r\n  },\r\n\r\n  getCurrentBlockType: function getCurrentBlockType(editorState) {\r\n    var selection = editorState.getSelection();\r\n    return editorState.getCurrentContent().getBlockForKey(selection.getStartKey()).getType();\r\n  },\r\n\r\n  getDataObjectForLinkURL: function getDataObjectForLinkURL(uri) {\r\n    return { url: uri.toString() };\r\n  },\r\n\r\n  handleKeyCommand: function handleKeyCommand(editorState, command) {\r\n    switch (command) {\r\n      case 'bold':\r\n        return RichTextEditorUtil.toggleInlineStyle(editorState, 'BOLD');\r\n      case 'italic':\r\n        return RichTextEditorUtil.toggleInlineStyle(editorState, 'ITALIC');\r\n      case 'underline':\r\n        return RichTextEditorUtil.toggleInlineStyle(editorState, 'UNDERLINE');\r\n      case 'code':\r\n        return RichTextEditorUtil.toggleCode(editorState);\r\n      case 'backspace':\r\n      case 'backspace-word':\r\n      case 'backspace-to-start-of-line':\r\n        return RichTextEditorUtil.onBackspace(editorState);\r\n      case 'delete':\r\n      case 'delete-word':\r\n      case 'delete-to-end-of-block':\r\n        return RichTextEditorUtil.onDelete(editorState);\r\n      default:\r\n        // they may have custom editor commands; ignore those\r\n        return null;\r\n    }\r\n  },\r\n\r\n  insertSoftNewline: function insertSoftNewline(editorState) {\r\n    var contentState = DraftModifier.insertText(editorState.getCurrentContent(), editorState.getSelection(), '\\n', editorState.getCurrentInlineStyle(), null);\r\n\r\n    var newEditorState = EditorState.push(editorState, contentState, 'insert-characters');\r\n\r\n    return EditorState.forceSelection(newEditorState, contentState.getSelectionAfter());\r\n  },\r\n\r\n  /**\r\n   * For collapsed selections at the start of styled blocks, backspace should\r\n   * just remove the existing style.\r\n   */\r\n  onBackspace: function onBackspace(editorState) {\r\n    var selection = editorState.getSelection();\r\n    if (!selection.isCollapsed() || selection.getAnchorOffset() || selection.getFocusOffset()) {\r\n      return null;\r\n    }\r\n\r\n    // First, try to remove a preceding atomic block.\r\n    var content = editorState.getCurrentContent();\r\n    var startKey = selection.getStartKey();\r\n    var blockBefore = content.getBlockBefore(startKey);\r\n\r\n    if (blockBefore && blockBefore.getType() === 'atomic') {\r\n      var blockMap = content.getBlockMap()['delete'](blockBefore.getKey());\r\n      var withoutAtomicBlock = content.merge({\r\n        blockMap: blockMap,\r\n        selectionAfter: selection\r\n      });\r\n      if (withoutAtomicBlock !== content) {\r\n        return EditorState.push(editorState, withoutAtomicBlock, 'remove-range');\r\n      }\r\n    }\r\n\r\n    // If that doesn't succeed, try to remove the current block style.\r\n    var withoutBlockStyle = RichTextEditorUtil.tryToRemoveBlockStyle(editorState);\r\n\r\n    if (withoutBlockStyle) {\r\n      return EditorState.push(editorState, withoutBlockStyle, 'change-block-type');\r\n    }\r\n\r\n    return null;\r\n  },\r\n\r\n  onDelete: function onDelete(editorState) {\r\n    var selection = editorState.getSelection();\r\n    if (!selection.isCollapsed()) {\r\n      return null;\r\n    }\r\n\r\n    var content = editorState.getCurrentContent();\r\n    var startKey = selection.getStartKey();\r\n    var block = content.getBlockForKey(startKey);\r\n    var length = block.getLength();\r\n\r\n    // The cursor is somewhere within the text. Behave normally.\r\n    if (selection.getStartOffset() < length) {\r\n      return null;\r\n    }\r\n\r\n    var blockAfter = content.getBlockAfter(startKey);\r\n\r\n    if (!blockAfter || blockAfter.getType() !== 'atomic') {\r\n      return null;\r\n    }\r\n\r\n    var atomicBlockTarget = selection.merge({\r\n      focusKey: blockAfter.getKey(),\r\n      focusOffset: blockAfter.getLength()\r\n    });\r\n\r\n    var withoutAtomicBlock = DraftModifier.removeRange(content, atomicBlockTarget, 'forward');\r\n\r\n    if (withoutAtomicBlock !== content) {\r\n      return EditorState.push(editorState, withoutAtomicBlock, 'remove-range');\r\n    }\r\n\r\n    return null;\r\n  },\r\n\r\n  onTab: function onTab(event, editorState, maxDepth) {\r\n    var selection = editorState.getSelection();\r\n    var key = selection.getAnchorKey();\r\n    if (key !== selection.getFocusKey()) {\r\n      return editorState;\r\n    }\r\n\r\n    var content = editorState.getCurrentContent();\r\n    var block = content.getBlockForKey(key);\r\n    var type = block.getType();\r\n    if (type !== 'unordered-list-item' && type !== 'ordered-list-item') {\r\n      return editorState;\r\n    }\r\n\r\n    event.preventDefault();\r\n\r\n    // Only allow indenting one level beyond the block above, and only if\r\n    // the block above is a list item as well.\r\n    var blockAbove = content.getBlockBefore(key);\r\n    if (!blockAbove) {\r\n      return editorState;\r\n    }\r\n\r\n    var typeAbove = blockAbove.getType();\r\n    if (typeAbove !== 'unordered-list-item' && typeAbove !== 'ordered-list-item') {\r\n      return editorState;\r\n    }\r\n\r\n    var depth = block.getDepth();\r\n    if (!event.shiftKey && depth === maxDepth) {\r\n      return editorState;\r\n    }\r\n\r\n    maxDepth = Math.min(blockAbove.getDepth() + 1, maxDepth);\r\n\r\n    var withAdjustment = adjustBlockDepthForContentState(content, selection, event.shiftKey ? -1 : 1, maxDepth);\r\n\r\n    return EditorState.push(editorState, withAdjustment, 'adjust-depth');\r\n  },\r\n\r\n  toggleBlockType: function toggleBlockType(editorState, blockType) {\r\n    var selection = editorState.getSelection();\r\n    var startKey = selection.getStartKey();\r\n    var endKey = selection.getEndKey();\r\n    var content = editorState.getCurrentContent();\r\n    var target = selection;\r\n\r\n    // Triple-click can lead to a selection that includes offset 0 of the\r\n    // following block. The `SelectionState` for this case is accurate, but\r\n    // we should avoid toggling block type for the trailing block because it\r\n    // is a confusing interaction.\r\n    if (startKey !== endKey && selection.getEndOffset() === 0) {\r\n      var blockBefore = nullthrows(content.getBlockBefore(endKey));\r\n      endKey = blockBefore.getKey();\r\n      target = target.merge({\r\n        anchorKey: startKey,\r\n        anchorOffset: selection.getStartOffset(),\r\n        focusKey: endKey,\r\n        focusOffset: blockBefore.getLength(),\r\n        isBackward: false\r\n      });\r\n    }\r\n\r\n    var hasAtomicBlock = content.getBlockMap().skipWhile(function (_, k) {\r\n      return k !== startKey;\r\n    }).reverse().skipWhile(function (_, k) {\r\n      return k !== endKey;\r\n    }).some(function (v) {\r\n      return v.getType() === 'atomic';\r\n    });\r\n\r\n    if (hasAtomicBlock) {\r\n      return editorState;\r\n    }\r\n\r\n    var typeToSet = content.getBlockForKey(startKey).getType() === blockType ? 'unstyled' : blockType;\r\n\r\n    return EditorState.push(editorState, DraftModifier.setBlockType(content, target, typeToSet), 'change-block-type');\r\n  },\r\n\r\n  toggleCode: function toggleCode(editorState) {\r\n    var selection = editorState.getSelection();\r\n    var anchorKey = selection.getAnchorKey();\r\n    var focusKey = selection.getFocusKey();\r\n\r\n    if (selection.isCollapsed() || anchorKey !== focusKey) {\r\n      return RichTextEditorUtil.toggleBlockType(editorState, 'code-block');\r\n    }\r\n\r\n    return RichTextEditorUtil.toggleInlineStyle(editorState, 'CODE');\r\n  },\r\n\r\n  /**\r\n   * Toggle the specified inline style for the selection. If the\r\n   * user's selection is collapsed, apply or remove the style for the\r\n   * internal state. If it is not collapsed, apply the change directly\r\n   * to the document state.\r\n   */\r\n  toggleInlineStyle: function toggleInlineStyle(editorState, inlineStyle) {\r\n    var selection = editorState.getSelection();\r\n    var currentStyle = editorState.getCurrentInlineStyle();\r\n\r\n    // If the selection is collapsed, toggle the specified style on or off and\r\n    // set the result as the new inline style override. This will then be\r\n    // used as the inline style for the next character to be inserted.\r\n    if (selection.isCollapsed()) {\r\n      return EditorState.setInlineStyleOverride(editorState, currentStyle.has(inlineStyle) ? currentStyle.remove(inlineStyle) : currentStyle.add(inlineStyle));\r\n    }\r\n\r\n    // If characters are selected, immediately apply or remove the\r\n    // inline style on the document state itself.\r\n    var content = editorState.getCurrentContent();\r\n    var newContent;\r\n\r\n    // If the style is already present for the selection range, remove it.\r\n    // Otherwise, apply it.\r\n    if (currentStyle.has(inlineStyle)) {\r\n      newContent = DraftModifier.removeInlineStyle(content, selection, inlineStyle);\r\n    } else {\r\n      newContent = DraftModifier.applyInlineStyle(content, selection, inlineStyle);\r\n    }\r\n\r\n    return EditorState.push(editorState, newContent, 'change-inline-style');\r\n  },\r\n\r\n  toggleLink: function toggleLink(editorState, targetSelection, entityKey) {\r\n    var withoutLink = DraftModifier.applyEntity(editorState.getCurrentContent(), targetSelection, entityKey);\r\n\r\n    return EditorState.push(editorState, withoutLink, 'apply-entity');\r\n  },\r\n\r\n  /**\r\n   * When a collapsed cursor is at the start of the first styled block, or\r\n   * an empty styled block, changes block to 'unstyled'. Returns null if\r\n   * block or selection does not meet that criteria.\r\n   */\r\n  tryToRemoveBlockStyle: function tryToRemoveBlockStyle(editorState) {\r\n    var selection = editorState.getSelection();\r\n    var offset = selection.getAnchorOffset();\r\n    if (selection.isCollapsed() && offset === 0) {\r\n      var key = selection.getAnchorKey();\r\n      var content = editorState.getCurrentContent();\r\n      var block = content.getBlockForKey(key);\r\n\r\n      var firstBlock = content.getFirstBlock();\r\n      if (block.getLength() > 0 && block !== firstBlock) {\r\n        return null;\r\n      }\r\n\r\n      var type = block.getType();\r\n      var blockBefore = content.getBlockBefore(key);\r\n      if (type === 'code-block' && blockBefore && blockBefore.getType() === 'code-block' && blockBefore.getLength() !== 0) {\r\n        return null;\r\n      }\r\n\r\n      if (type !== 'unstyled') {\r\n        return DraftModifier.setBlockType(content, selection, 'unstyled');\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n};\r\n\r\nmodule.exports = RichTextEditorUtil;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}