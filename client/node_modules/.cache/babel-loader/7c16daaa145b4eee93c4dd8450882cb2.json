{"ast":null,"code":"import _regeneratorRuntime from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/mahak/Desktop/Virtual-Stock-Market/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/mahak/Desktop/Virtual-Stock-Market/client/src/pages/Portfolio.js\";\nimport React, { Component } from 'react';\nimport { Row, Col, Alert, Spin } from 'antd';\nimport { Share } from '../components';\nimport { BuyShare } from '../components';\nimport { getPortfolio, getCash, getStockQuotes } from '../apis';\n\nvar Portfolio =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Portfolio, _Component);\n\n  function Portfolio() {\n    var _this;\n\n    _classCallCheck(this, Portfolio);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Portfolio).call(this));\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var portfolio, cash;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this.setState({\n                pageIsLoading: false\n              });\n\n              _context2.next = 3;\n              return getPortfolio();\n\n            case 3:\n              portfolio = _context2.sent;\n              _context2.next = 6;\n              return getCash();\n\n            case 6:\n              cash = _context2.sent;\n\n              _this.setState({\n                portfolio: portfolio,\n                cash: cash\n              });\n\n              _this.interval = setInterval(\n              /*#__PURE__*/\n              _asyncToGenerator(\n              /*#__PURE__*/\n              _regeneratorRuntime.mark(function _callee() {\n                var keys, quotes, total;\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        keys = Object.keys(portfolio);\n                        _context.next = 3;\n                        return getStockQuotes(keys);\n\n                      case 3:\n                        quotes = _context.sent;\n                        total = _this.state.cash;\n                        console.log();\n                        Object.keys(quotes).forEach(function (key) {\n                          total += quotes[key].latestPrice * portfolio[key];\n                        });\n\n                        _this.setState({\n                          quotes: quotes,\n                          portfolioTotal: total\n                        });\n\n                      case 8:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              })), 2000);\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    _this.state = {\n      portfolio: {},\n      cash: 0,\n      quotes: {},\n      portfolioTotal: 0\n    };\n    return _this;\n  }\n\n  _createClass(Portfolio, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.interval);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          portfolio = _this$state.portfolio,\n          cash = _this$state.cash,\n          quotes = _this$state.quotes,\n          portfolioTotal = _this$state.portfolioTotal;\n      return this.props.isPageLoading ? React.createElement(Row, {\n        type: \"flex\",\n        justify: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(Spin, {\n        size: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      })) : this.props.isLoggedIn ? React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"page-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, \"Portfolio ($\", portfolioTotal.toFixed(2), \")\")), React.createElement(Row, {\n        type: \"flex\",\n        justify: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(Col, {\n        span: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, Object.entries(portfolio).length > 0 ? Object.keys(portfolio).map(function (key) {\n        return React.createElement(Share, Object.assign({\n          symbol: key,\n          key: key,\n          quantity: portfolio[key]\n        }, quotes[key], {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }));\n      }) : React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, \"Start with buying your first stock on the right.\")), React.createElement(Col, {\n        span: 3,\n        className: \"portfolio-middle-line\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), React.createElement(Col, {\n        span: 9,\n        offset: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(BuyShare, {\n        cash: cash,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      })))) : React.createElement(Alert, {\n        message: \"Warning\",\n        description: \"Please Log in first\",\n        type: \"warning\",\n        showIcon: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Portfolio;\n}(Component);\n\nexport default Portfolio;","map":{"version":3,"sources":["/home/mahak/Desktop/Virtual-Stock-Market/client/src/pages/Portfolio.js"],"names":["React","Component","Row","Col","Alert","Spin","Share","BuyShare","getPortfolio","getCash","getStockQuotes","Portfolio","componentDidMount","setState","pageIsLoading","portfolio","cash","interval","setInterval","keys","Object","quotes","total","state","console","log","forEach","key","latestPrice","portfolioTotal","clearInterval","props","isPageLoading","isLoggedIn","toFixed","entries","length","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Row, Col, Alert, Spin } from 'antd'\nimport { Share } from '../components'\nimport { BuyShare } from '../components'\nimport { getPortfolio, getCash, getStockQuotes } from '../apis'\n\nclass Portfolio extends Component {\n\n  constructor(){\n    super()\n    this.state = {\n      portfolio: {},\n      cash: 0,\n      quotes: {},\n      portfolioTotal: 0,\n    }\n  }\n\n  componentDidMount = async() => {\n    this.setState({\n      pageIsLoading: false,\n    })\n    const portfolio = await getPortfolio()\n    const cash = await getCash()\n    this.setState({\n      portfolio: portfolio,\n      cash: cash\n    })\n    this.interval = setInterval( async () => {\n      const keys = Object.keys(portfolio)\n      const quotes = await getStockQuotes(keys)\n      let total = this.state.cash\n      console.log()\n      Object.keys(quotes).forEach( key =>{\n        total += quotes[key].latestPrice * portfolio[key]\n      })\n      this.setState({\n        quotes : quotes,\n        portfolioTotal : total\n      })\n    },\n    2000);\n  }\n  \n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  render(){\n    const { portfolio, cash, quotes, portfolioTotal } = this.state\n    return(\n      this.props.isPageLoading ?\n      <Row type=\"flex\" justify=\"center\">\n        <Spin size=\"large\" />\n      </Row> \n      :\n      (this.props.isLoggedIn ?\n      <Row>\n        <Row>\n          <h1 className=\"page-title\">Portfolio (${portfolioTotal.toFixed(2)})</h1>\n        </Row>\n        <Row type=\"flex\" justify=\"center\">\n          <Col span={10}>\n            { Object.entries(portfolio).length > 0 ?\n              Object.keys(portfolio).map((key) => {\n                return <Share \n                        symbol={key}\n                        key={key}\n                        quantity={portfolio[key]}\n                        {...quotes[key]}\n                      />\n              }) :\n              <h5>Start with buying your first stock on the right.</h5>\n            }\n          </Col>\n          <Col span={3} className=\"portfolio-middle-line\"></Col>\n          <Col span={9} offset={2}>\n            <BuyShare cash={cash} />\n          </Col>\n        </Row>\n      </Row>:\n      <Alert\n        message=\"Warning\"\n        description=\"Please Log in first\"\n        type=\"warning\"\n        showIcon\n      />)\n    )\n  }\n\n}\n\nexport default Portfolio"]},"metadata":{},"sourceType":"module"}