{"ast":null,"code":"/**\r\n * Copyright (c) 2013-present, Facebook, Inc.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the BSD-style license found in the\r\n * LICENSE file in the root directory of this source tree. An additional grant\r\n * of patent rights can be found in the PATENTS file in the same directory.\r\n *\r\n * @providesModule DraftEditorDragHandler\r\n * @format\r\n * \r\n */\n\n'use strict';\n\nvar DataTransfer = require('fbjs/lib/DataTransfer');\nvar DraftModifier = require('./DraftModifier');\nvar EditorState = require('./EditorState');\nvar findAncestorOffsetKey = require('./findAncestorOffsetKey');\nvar getTextContentFromFiles = require('./getTextContentFromFiles');\nvar getUpdatedSelectionState = require('./getUpdatedSelectionState');\nvar isEventHandled = require('./isEventHandled');\nvar nullthrows = require('fbjs/lib/nullthrows');\n\n/**\r\n * Get a SelectionState for the supplied mouse event.\r\n */\nfunction getSelectionForEvent(event, editorState) {\n  var node = null;\n  var offset = null;\n  if (typeof document.caretRangeFromPoint === 'function') {\n    var dropRange = document.caretRangeFromPoint(event.x, event.y);\n    node = dropRange.startContainer;\n    offset = dropRange.startOffset;\n  } else if (event.rangeParent) {\n    node = event.rangeParent;\n    offset = event.rangeOffset;\n  } else {\n    return null;\n  }\n  node = nullthrows(node);\n  offset = nullthrows(offset);\n  var offsetKey = nullthrows(findAncestorOffsetKey(node));\n  return getUpdatedSelectionState(editorState, offsetKey, offset, offsetKey, offset);\n}\nvar DraftEditorDragHandler = {\n  /**\r\n   * Drag originating from input terminated.\r\n   */\n  onDragEnd: function onDragEnd(editor) {\n    editor.exitCurrentMode();\n  },\n  /**\r\n   * Handle data being dropped.\r\n   */\n  onDrop: function onDrop(editor, e) {\n    var data = new DataTransfer(e.nativeEvent.dataTransfer);\n    var editorState = editor._latestEditorState;\n    var dropSelection = getSelectionForEvent(e.nativeEvent, editorState);\n    e.preventDefault();\n    editor.exitCurrentMode();\n    if (dropSelection == null) {\n      return;\n    }\n    var files = data.getFiles();\n    if (files.length > 0) {\n      if (editor.props.handleDroppedFiles && isEventHandled(editor.props.handleDroppedFiles(dropSelection, files))) {\n        return;\n      }\n      getTextContentFromFiles(files, function (fileText) {\n        fileText && editor.update(insertTextAtSelection(editorState, dropSelection, fileText));\n      });\n      return;\n    }\n    var dragType = editor._internalDrag ? 'internal' : 'external';\n    if (editor.props.handleDrop && isEventHandled(editor.props.handleDrop(dropSelection, data, dragType))) {\n      return;\n    }\n    if (editor._internalDrag) {\n      editor.update(moveText(editorState, dropSelection));\n      return;\n    }\n    editor.update(insertTextAtSelection(editorState, dropSelection, data.getText()));\n  }\n};\nfunction moveText(editorState, targetSelection) {\n  var newContentState = DraftModifier.moveText(editorState.getCurrentContent(), editorState.getSelection(), targetSelection);\n  return EditorState.push(editorState, newContentState, 'insert-fragment');\n}\n\n/**\r\n * Insert text at a specified selection.\r\n */\nfunction insertTextAtSelection(editorState, selection, text) {\n  var newContentState = DraftModifier.insertText(editorState.getCurrentContent(), selection, text, editorState.getCurrentInlineStyle());\n  return EditorState.push(editorState, newContentState, 'insert-fragment');\n}\nmodule.exports = DraftEditorDragHandler;","map":{"version":3,"names":["DataTransfer","require","DraftModifier","EditorState","findAncestorOffsetKey","getTextContentFromFiles","getUpdatedSelectionState","isEventHandled","nullthrows","getSelectionForEvent","event","editorState","node","offset","document","caretRangeFromPoint","dropRange","x","y","startContainer","startOffset","rangeParent","rangeOffset","offsetKey","DraftEditorDragHandler","onDragEnd","editor","exitCurrentMode","onDrop","e","data","nativeEvent","dataTransfer","_latestEditorState","dropSelection","preventDefault","files","getFiles","length","props","handleDroppedFiles","fileText","update","insertTextAtSelection","dragType","_internalDrag","handleDrop","moveText","getText","targetSelection","newContentState","getCurrentContent","getSelection","push","selection","text","insertText","getCurrentInlineStyle","module","exports"],"sources":["C:/Users/ajayg/Desktop/vssample/stock_mocker/client/node_modules/draft-js/lib/DraftEditorDragHandler.js"],"sourcesContent":["/**\r\n * Copyright (c) 2013-present, Facebook, Inc.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the BSD-style license found in the\r\n * LICENSE file in the root directory of this source tree. An additional grant\r\n * of patent rights can be found in the PATENTS file in the same directory.\r\n *\r\n * @providesModule DraftEditorDragHandler\r\n * @format\r\n * \r\n */\r\n\r\n'use strict';\r\n\r\nvar DataTransfer = require('fbjs/lib/DataTransfer');\r\nvar DraftModifier = require('./DraftModifier');\r\nvar EditorState = require('./EditorState');\r\n\r\nvar findAncestorOffsetKey = require('./findAncestorOffsetKey');\r\nvar getTextContentFromFiles = require('./getTextContentFromFiles');\r\nvar getUpdatedSelectionState = require('./getUpdatedSelectionState');\r\nvar isEventHandled = require('./isEventHandled');\r\nvar nullthrows = require('fbjs/lib/nullthrows');\r\n\r\n/**\r\n * Get a SelectionState for the supplied mouse event.\r\n */\r\nfunction getSelectionForEvent(event, editorState) {\r\n  var node = null;\r\n  var offset = null;\r\n\r\n  if (typeof document.caretRangeFromPoint === 'function') {\r\n    var dropRange = document.caretRangeFromPoint(event.x, event.y);\r\n    node = dropRange.startContainer;\r\n    offset = dropRange.startOffset;\r\n  } else if (event.rangeParent) {\r\n    node = event.rangeParent;\r\n    offset = event.rangeOffset;\r\n  } else {\r\n    return null;\r\n  }\r\n\r\n  node = nullthrows(node);\r\n  offset = nullthrows(offset);\r\n  var offsetKey = nullthrows(findAncestorOffsetKey(node));\r\n\r\n  return getUpdatedSelectionState(editorState, offsetKey, offset, offsetKey, offset);\r\n}\r\n\r\nvar DraftEditorDragHandler = {\r\n  /**\r\n   * Drag originating from input terminated.\r\n   */\r\n  onDragEnd: function onDragEnd(editor) {\r\n    editor.exitCurrentMode();\r\n  },\r\n\r\n  /**\r\n   * Handle data being dropped.\r\n   */\r\n  onDrop: function onDrop(editor, e) {\r\n    var data = new DataTransfer(e.nativeEvent.dataTransfer);\r\n\r\n    var editorState = editor._latestEditorState;\r\n    var dropSelection = getSelectionForEvent(e.nativeEvent, editorState);\r\n\r\n    e.preventDefault();\r\n    editor.exitCurrentMode();\r\n\r\n    if (dropSelection == null) {\r\n      return;\r\n    }\r\n\r\n    var files = data.getFiles();\r\n    if (files.length > 0) {\r\n      if (editor.props.handleDroppedFiles && isEventHandled(editor.props.handleDroppedFiles(dropSelection, files))) {\r\n        return;\r\n      }\r\n\r\n      getTextContentFromFiles(files, function (fileText) {\r\n        fileText && editor.update(insertTextAtSelection(editorState, dropSelection, fileText));\r\n      });\r\n      return;\r\n    }\r\n\r\n    var dragType = editor._internalDrag ? 'internal' : 'external';\r\n    if (editor.props.handleDrop && isEventHandled(editor.props.handleDrop(dropSelection, data, dragType))) {\r\n      return;\r\n    }\r\n\r\n    if (editor._internalDrag) {\r\n      editor.update(moveText(editorState, dropSelection));\r\n      return;\r\n    }\r\n\r\n    editor.update(insertTextAtSelection(editorState, dropSelection, data.getText()));\r\n  }\r\n};\r\n\r\nfunction moveText(editorState, targetSelection) {\r\n  var newContentState = DraftModifier.moveText(editorState.getCurrentContent(), editorState.getSelection(), targetSelection);\r\n  return EditorState.push(editorState, newContentState, 'insert-fragment');\r\n}\r\n\r\n/**\r\n * Insert text at a specified selection.\r\n */\r\nfunction insertTextAtSelection(editorState, selection, text) {\r\n  var newContentState = DraftModifier.insertText(editorState.getCurrentContent(), selection, text, editorState.getCurrentInlineStyle());\r\n  return EditorState.push(editorState, newContentState, 'insert-fragment');\r\n}\r\n\r\nmodule.exports = DraftEditorDragHandler;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}